<!DOCTYPE html>
<html lang="de" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Tracker Pro - Dein pers√∂nlicher Gesundheits-Tracker</title>
    
    <!-- PWA Meta Tags -->
    <meta name="app-version" content="2.1.0">
    <meta name="app-build" content="2025.08.08">
    <meta name="data-retention-default" content="365">
    <meta name="description" content="Verfolge deine Gesundheitsziele mit diesem modernen, professionellen Health Tracker. Offline-f√§hig und benutzerfreundlich.">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Health Tracker Pro">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23667eea'><path d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z'/></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23667eea'><path d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z'/></svg>">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#667eea',
                        secondary: '#764ba2',
                        accent: '#f093fb'
                    }
                }
            }
        }
    </script>
    
    <!-- Chart.js f√ºr Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <script>
// === GLOBAL ERROR HANDLER ===
window.addEventListener('error', function(e) {
    console.error('üö® JavaScript Fehler:', e.error);
    if (e.error.message.includes('healthTracker')) {
        console.warn('‚ö†Ô∏è HealthTracker nicht verf√ºgbar - wird nachgeladen...');
    }
});

// === FALLBACK F√úR DROPDOWN-FUNKTIONEN ===
function fallbackShowSettings() {
    if (window.healthTracker && typeof window.healthTracker.showSettings === 'function') {
        window.healthTracker.showSettings();
    } else {
        alert('‚ö†Ô∏è Einstellungen werden geladen...');
        setTimeout(() => {
            if (window.healthTracker) {
                window.healthTracker.showSettings();
            }
        }, 1000);
    }
}
</script>

    <style>
        /* Custom CSS f√ºr optimale Performance */
        .input-error {
            @apply input-error border-error;
        }
        
        /* Chart Container Fixes */
        .analytics-view canvas {
            display: block !important;
            max-height: 400px !important;
        }
        
        /* Smooth Animations */
        .stat-card {
            transition: transform 0.2s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
        }
        
        /* Progress Animation */
        .progress {
            transition: all 0.3s ease;
        }
        
        /* Notification Animations */
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification-enter {
            animation: slideInRight 0.3s ease;
        }
        
        /* Loading Spinner */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .animate-spin-slow {
            animation: spin 2s linear infinite;
        }

        /* Heatmap Styles */
.heatmap-grid {
    max-width: 500px;
    margin: 0 auto;
}

.heatmap-cell {
    aspect-ratio: 1;
    min-height: 20px;
    border-radius: 2px;
    transition: all 0.2s ease;
    cursor: pointer;
}

.heatmap-cell:hover {
    transform: scale(1.1);
    border-color: #3b82f6 !important;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
}

/* Tooltip styles (falls du daisyUI Tooltips verwendest) */
.tooltip:before {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
}

/* Enhanced Navigation Animations */
.navbar {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.navbar:hover {
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
}

/* Smooth menu transitions */
.menu li > a {
    transition: all 0.2s ease-in-out;
    position: relative;
    overflow: hidden;
}

.menu li > a::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.5s;
}

.menu li > a:hover::before {
    left: 100%;
}

/* Enhanced badge animations */
.badge.animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Bottom navigation enhancements */
.btm-nav > * {
    transition: all 0.2s ease-in-out;
}

.btm-nav > *:hover {
    transform: translateY(-2px);
}

/* Dropdown enhancements */
.dropdown-content {
    animation: fadeInUp 0.2s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Enhanced Hero Section Animations */
.hero {
    position: relative;
}

/* Floating Animation Delays */
.animation-delay-1000 {
    animation-delay: 1s;
}

.animation-delay-2000 {
    animation-delay: 2s;
}

/* Button Hover Enhancements */
.btn:hover {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

/* Card Hover Effects */
.card:hover {
    transform: translateY(-4px);
}

/* Text Gradient Animation */
@keyframes gradient-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

.bg-gradient-to-r {
    background-size: 200% 200%;
    animation: gradient-shift 6s ease infinite;
}

/* Badge Pulse Effect */
.badge .animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Custom Shadow Classes */
.shadow-3xl {
    box-shadow: 0 35px 60px -12px rgba(0, 0, 0, 0.25);
}

/* Backdrop Blur Enhancement */
.backdrop-blur-sm {
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
}

/* Enhanced Responsive Typography */
@media (max-width: 640px) {
    .text-6xl {
        font-size: 3rem;
    }
    .text-7xl {
        font-size: 3.5rem;
    }
}

/* Enhanced Footer Animations */
.footer {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Hover effects for footer links */
.footer nav a:hover {
    transform: translateX(4px);
}

.footer nav button:hover {
    transform: translateX(4px);
}

/* Stats animation */
.stat-value {
    transition: all 0.3s ease;
}

.stat-value:hover {
    transform: scale(1.05);
}

/* Badge hover effects */
.badge {
    transition: all 0.2s ease;
}

.badge:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Enhanced social buttons */
.btn-circle:hover {
    transform: rotate(5deg) scale(1.1);
}

/* Enhanced Analytics Animations */
.analytics-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.analytics-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Chart container animations */
#trends-chart, #correlation-chart, #weekly-summary-chart, #goal-progress-chart {
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.chart-loading {
    opacity: 0.6;
    transform: scale(0.98);
}

/* Enhanced tab animations */
.tabs .tab {
    transition: all 0.2s ease;
}

.tabs .tab:hover {
    transform: translateY(-1px);
}

.tabs .tab-active {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Stats animation on load */
.stat-value {
    animation: countUp 1s ease-out;
}

@keyframes countUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Enhanced alert animations */
.alert {
    animation: slideInLeft 0.5s ease-out;
}

@keyframes slideInLeft {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Loading state transitions */
.loading-overlay {
    transition: opacity 0.3s ease;
}

/* Enhanced dropdown animations */
.dropdown-content {
    animation: dropdownFadeIn 0.2s ease-out;
}

@keyframes dropdownFadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Responsive grid enhancements */
@media (max-width: 768px) {
    .analytics-card .card-body {
        padding: 1rem;
    }
    
    .stats {
        grid-template-columns: 1fr;
    }
}

/* Theme-Vorschau Effekte */
.modal .card {
    transition: all 0.3s ease;
}

.modal .card:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.modal .card.ring-2 {
    transform: scale(1.02);
}

/* Theme-spezifische Verbesserungen */
.theme-health .hero {
    background: linear-gradient(135deg, oklch(65% 0.25 145), oklch(70% 0.2 160));
}

.theme-wellness .card {
    box-shadow: 0 4px 12px oklch(70% 0.15 140 / 0.2);
}

.theme-corporate .btn-primary {
    background: linear-gradient(135deg, oklch(45% 0.1 220), oklch(50% 0.15 200));
}

/* Smooth Theme Transitions */
* {
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}
/* Erweiterte Theme-spezifische Anpassungen */
.theme-nature {
    --nature-gradient: linear-gradient(135deg, oklch(70% 0.25 140), oklch(75% 0.2 160));
}

.theme-nature .hero {
    background: var(--nature-gradient);
}

.theme-retro .btn-primary {
    background: linear-gradient(135deg, oklch(65% 0.3 320), oklch(70% 0.35 340));
    border: none;
    box-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
}

.theme-luxury .card {
    background: linear-gradient(135deg, oklch(95% 0.02 80), oklch(98% 0.01 60));
    border: 1px solid oklch(85% 0.05 80);
}

.theme-neon .btn:hover {
    box-shadow: 0 0 30px currentColor;
    animation: neonPulse 1.5s infinite alternate;
}

@keyframes neonPulse {
    0% { box-shadow: 0 0 5px currentColor; }
    100% { box-shadow: 0 0 30px currentColor, 0 0 40px currentColor; }
}
    </style>
</head>

<body class="min-h-screen bg-base-100">
    <!-- Enhanced Navigation mit vollst√§ndiger daisyUI Optimierung -->
<div class="navbar bg-base-100 shadow-lg border-b border-base-300/50 sticky top-0 z-50 backdrop-blur-sm">
    <!-- Navbar Start - Logo & Mobile Menu -->
    <div class="navbar-start">
        <!-- Mobile Dropdown Menu -->
        <div class="dropdown lg:hidden">
            <div tabindex="0" role="button" class="btn btn-ghost btn-circle btn-sm">
                <i data-lucide="menu" class="w-5 h-5"></i>
            </div>
            <ul tabindex="0" class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-64 p-2 shadow-2xl border border-base-300/50">
                <li class="menu-title">
                    <span class="text-base-content/70">Navigation</span>
                </li>
                <li>
                    <a href="#dashboard" class="gap-3 py-3">
                        <i data-lucide="home" class="w-4 h-4 text-primary"></i>
                        <span>Dashboard</span>
                        <div class="badge badge-primary badge-xs"></div>
                    </a>
                </li>
                <li>
                    <a href="#progress-hub" class="gap-3 py-3">
                        <i data-lucide="target" class="w-4 h-4 text-success"></i>
                        <span>Fortschritt</span>
                    </a>
                </li>
                <li>
                    <a href="#analytics" class="gap-3 py-3">
                        <i data-lucide="bar-chart-3" class="w-4 h-4 text-info"></i>
                        <span>Analytics</span>
                    </a>
                </li>
                <div class="divider my-2"></div>
                <li>
                    <a href="#health-form" class="gap-3 py-3 text-primary font-medium">
                        <i data-lucide="plus-circle" class="w-4 h-4"></i>
                        <span>Daten eingeben</span>
                        <div class="badge badge-primary badge-outline badge-xs">Neu</div>
                    </a>
                </li>
            </ul>
        </div>
        
        <!-- Logo/Brand -->
        <a class="btn btn-ghost text-xl font-bold normal-case gap-2">
            <div class="avatar placeholder">
                <div class="bg-gradient-to-br from-primary to-secondary text-primary-content rounded-lg w-8 h-8">
                    <i data-lucide="activity" class="w-4 h-4"></i>
                </div>
            </div>
            <span class="bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent hidden sm:inline">
                Health Tracker Pro
            </span>
            <span class="text-primary sm:hidden">HTP</span>
        </a>
    </div>
    
    <!-- Navbar Center - Desktop Navigation -->
    <div class="navbar-center hidden lg:flex">
        <ul class="menu menu-horizontal gap-1">
            <li>
                <a href="#dashboard" class="btn btn-ghost btn-sm gap-2 hover:btn-primary hover:text-primary-content transition-all duration-200">
                    <i data-lucide="home" class="w-4 h-4"></i>
                    <span>Dashboard</span>
                    <div class="badge badge-primary badge-xs opacity-75"></div>
                </a>
            </li>
            <li>
                <a href="#progress-hub" class="btn btn-ghost btn-sm gap-2 hover:btn-success hover:text-success-content transition-all duration-200">
                    <i data-lucide="target" class="w-4 h-4"></i>
                    <span>Fortschritt</span>
                </a>
            </li>
            <li>
                <a href="#analytics" class="btn btn-ghost btn-sm gap-2 hover:btn-info hover:text-info-content transition-all duration-200">
                    <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
                    <span>Analytics</span>
                </a>
            </li>
        </ul>
    </div>
    
    <!-- Navbar End - Actions & Status -->
    <div class="navbar-end gap-1">
        <!-- Connection Status Badge -->
        <div class="indicator">
            <span class="indicator-item indicator-top indicator-end badge badge-success badge-xs animate-pulse"></span>
            <div class="badge badge-success gap-2 hidden sm:flex cursor-pointer tooltip tooltip-bottom" data-tip="Verbindungsstatus" id="connection-status">
                <span class="text-xs font-medium">Online</span>
            </div>
        </div>
        
        <!-- Goals Button with Indicator -->
        <div class="indicator">
            <span class="indicator-item indicator-top indicator-end badge badge-secondary badge-xs">!</span>
            <button class="btn btn-ghost btn-sm gap-2 hover:btn-secondary hover:text-secondary-content transition-all duration-200 tooltip tooltip-bottom" 
                    data-tip="Ziele verwalten"
                    onclick="document.getElementById('goals-modal').showModal()">
                <i data-lucide="target" class="w-4 h-4"></i>
                <span class="hidden xl:inline">Ziele</span>
            </button>
        </div>
        
        <!-- Action Menu Dropdown -->
        <div class="dropdown dropdown-end">
            <div tabindex="0" role="button" class="btn btn-ghost btn-circle btn-sm hover:btn-accent transition-all duration-200">
                <i data-lucide="more-vertical" class="w-4 h-4"></i>
            </div>
            <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] w-56 p-2 shadow-2xl border border-base-300/50">
                <li class="menu-title">
                    <span class="text-base-content/70">Aktionen</span>
                </li>
                
                <!-- Theme Toggle -->
                <li>
                    <button class="btn btn-ghost gap-2" onclick="healthTracker.showThemeSelector()">
                        <i data-lucide="palette" class="w-5 h-5"></i>
                        <span>Design √§ndern</span>
                    </button>
                </li>
                
                <!-- Install PWA -->
                <li>
                    <button id="install-btn" class="gap-3 py-3 hidden">
                        <i data-lucide="download" class="w-4 h-4 text-info"></i>
                        <span>App installieren</span>
                        <div class="badge badge-info badge-xs">PWA</div>
                    </button>
                </li>
                
                <div class="divider my-2"></div>
                
                <!-- Settings -->
                <li>
                    <button class="gap-3 py-3">
                        <i data-lucide="settings" class="w-4 h-4 text-base-content/70"></i>
                        <span>Einstellungen</span>
                    </button>
                </li>
                
                <!-- Help -->
                <li>
                    <button class="gap-3 py-3">
                        <i data-lucide="help-circle" class="w-4 h-4 text-base-content/70"></i>
                        <span>Hilfe & Support</span>
                    </button>
                </li>
            </ul>
        </div>
    </div>
</div>

<!-- Enhanced Mobile Quick Actions Fab (Optional) -->
<div class="btm-nav lg:hidden z-40 border-t border-base-300/50 bg-base-100/80 backdrop-blur-sm">
    <a href="#dashboard" class="bg-primary text-primary-content">
        <i data-lucide="home" class="w-5 h-5"></i>
        <span class="btm-nav-label">Home</span>
    </a>
    <a href="#progress-hub">
        <i data-lucide="target" class="w-5 h-5"></i>
        <span class="btm-nav-label">Fortschritt</span>
    </a>
    <a href="#health-form" class="bg-success text-success-content">
        <i data-lucide="plus" class="w-5 h-5"></i>
        <span class="btm-nav-label">Hinzuf√ºgen</span>
    </a>
    <a href="#analytics">
        <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
        <span class="btm-nav-label">Analytics</span>
    </a>
</div>

    <!-- Optimierte Hero Section -->
<section class="hero min-h-[50vh] bg-gradient-to-br from-primary/20 via-secondary/10 to-accent/20 relative overflow-hidden">
    <!-- Background Pattern -->
    <div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width="20" height="20" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="%23ffffff" fill-opacity="0.03" fill-rule="evenodd"%3E%3Ccircle cx="3" cy="3" r="3"/%3E%3C/g%3E%3C/svg%3E')]"></div>
    
    <div class="hero-content text-center relative z-10 max-w-6xl mx-auto px-4">
        <div class="w-full">
            <!-- Main Heading -->
            <div class="mb-8">
                <div class="flex justify-center mb-4">
                    <div class="p-4 bg-primary/10 rounded-2xl backdrop-blur-sm border border-primary/20">
                        <i data-lucide="heart-pulse" class="w-16 h-16 text-primary"></i>
                    </div>
                </div>
                
                <h1 class="text-4xl md:text-6xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent mb-4">
                    Health Tracker Pro
                </h1>
                
                <div class="badge badge-primary badge-lg gap-2 mb-6">
                    <i data-lucide="sparkles" class="w-4 h-4"></i>
                    Progressive Web App
                </div>
                
                <p class="text-lg md:text-xl text-base-content/80 max-w-2xl mx-auto leading-relaxed">
                    Verfolge deine Gesundheitsziele intelligent und erreiche mehr Wohlbefinden durch 
                    <span class="font-semibold text-primary">datenbasierte Einblicke</span> und 
                    <span class="font-semibold text-secondary">personalisierte Empfehlungen</span>.
                </p>
            </div>

            <!-- Quick Stats Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="stat bg-base-100/80 backdrop-blur-sm rounded-2xl border border-base-300/50 shadow-lg hover:shadow-xl transition-all duration-300">
                    <div class="stat-figure text-primary">
                        <i data-lucide="target" class="w-8 h-8"></i>
                    </div>
                    <div class="stat-title text-xs">Heutige Ziele</div>
                    <div class="stat-value text-2xl" id="hero-goals-today">‚Äî</div>
                    <div class="stat-desc text-xs">erreicht</div>
                </div>
                
                <div class="stat bg-base-100/80 backdrop-blur-sm rounded-2xl border border-base-300/50 shadow-lg hover:shadow-xl transition-all duration-300">
                    <div class="stat-figure text-secondary">
                        <i data-lucide="calendar-days" class="w-8 h-8"></i>
                    </div>
                    <div class="stat-title text-xs">Aktueller Streak</div>
                    <div class="stat-value text-2xl" id="hero-current-streak">‚Äî</div>
                    <div class="stat-desc text-xs">Tage in Folge</div>
                </div>
                
                <div class="stat bg-base-100/80 backdrop-blur-sm rounded-2xl border border-base-300/50 shadow-lg hover:shadow-xl transition-all duration-300">
                    <div class="stat-figure text-accent">
                        <i data-lucide="trending-up" class="w-8 h-8"></i>
                    </div>
                    <div class="stat-title text-xs">Verbesserung</div>
                    <div class="stat-value text-2xl" id="hero-improvement">‚Äî</div>
                    <div class="stat-desc text-xs">diese Woche</div>
                </div>
                
                <div class="stat bg-base-100/80 backdrop-blur-sm rounded-2xl border border-base-300/50 shadow-lg hover:shadow-xl transition-all duration-300">
                    <div class="stat-figure text-info">
                        <i data-lucide="database" class="w-8 h-8"></i>
                    </div>
                    <div class="stat-title text-xs">Gesamt Eintr√§ge</div>
                    <div class="stat-value text-2xl" id="hero-total-entries">‚Äî</div>
                    <div class="stat-desc text-xs">erfasst</div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-8">
                <button class="btn btn-primary btn-lg gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200" onclick="document.getElementById('health-form').scrollIntoView({behavior: 'smooth'})">
                    <i data-lucide="plus-circle" class="w-5 h-5"></i>
                    Daten eingeben
                </button>
                
                <button class="btn btn-outline btn-secondary btn-lg gap-2 hover:shadow-lg transform hover:scale-105 transition-all duration-200" onclick="document.getElementById('progress-hub').scrollIntoView({behavior: 'smooth'})">
                    <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
                    Fortschritt ansehen
                </button>
                
                <div class="dropdown dropdown-top sm:dropdown-bottom">
    <div tabindex="0" role="button" class="btn btn-ghost btn-lg gap-2">
        <i data-lucide="more-horizontal" class="w-5 h-5"></i>
        Mehr
    </div>
    <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow-xl bg-base-100 rounded-box w-52 border border-base-300">
        <li><a onclick="document.getElementById('edit-goals-btn').click()">
    <i data-lucide="flag" class="w-4 h-4"></i>
    Ziele anpassen
</a></li>
        <li><a onclick="showInstallPrompt()">
            <i data-lucide="download" class="w-4 h-4"></i>
            App installieren
        </a></li>
        <li><a onclick="healthTracker.showImportExport()">
            <i data-lucide="download-cloud" class="w-4 h-4"></i>
            Import/Export
        </a></li>
        <li><a onclick="healthTracker.showDataPrivacy()">
            <i data-lucide="shield-check" class="w-4 h-4"></i>
            Datenschutz
        </a></li>
        <li><a onclick="healthTracker.showAbout()">
            <i data-lucide="info" class="w-4 h-4"></i>
            √úber die App
        </a></li>
        <li><a onclick="healthTracker.showHelp()">
            <i data-lucide="help-circle" class="w-4 h-4"></i>
            Hilfe
        </a></li>
        <li><a onclick="healthTracker.showSettings()">
            <i data-lucide="settings" class="w-4 h-4"></i>
            Einstellungen
        </a></li>
    </ul>
</div>
            </div>

            <!-- Feature Highlights -->
            <div class="grid md:grid-cols-3 gap-6 max-w-4xl mx-auto">
                <div class="card bg-base-100/60 backdrop-blur-sm border border-base-300/50 shadow-lg hover:shadow-xl transition-all duration-300">
                    <div class="card-body items-center text-center p-6">
                        <div class="w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mb-4">
                            <i data-lucide="wifi-off" class="w-6 h-6 text-primary"></i>
                        </div>
                        <h3 class="card-title text-lg">Offline-First</h3>
                        <p class="text-sm text-base-content/70">Funktioniert auch ohne Internetverbindung. Deine Daten sind immer verf√ºgbar.</p>
                    </div>
                </div>
                
                <div class="card bg-base-100/60 backdrop-blur-sm border border-base-300/50 shadow-lg hover:shadow-xl transition-all duration-300">
                    <div class="card-body items-center text-center p-6">
                        <div class="w-12 h-12 bg-secondary/10 rounded-xl flex items-center justify-center mb-4">
                            <i data-lucide="brain" class="w-6 h-6 text-secondary"></i>
                        </div>
                        <h3 class="card-title text-lg">KI-Insights</h3>
                        <p class="text-sm text-base-content/70">Intelligente Analyse deiner Gesundheitsdaten mit personalisierten Empfehlungen.</p>
                    </div>
                </div>
                
                <div class="card bg-base-100/60 backdrop-blur-sm border border-base-300/50 shadow-lg hover:shadow-xl transition-all duration-300">
                    <div class="card-body items-center text-center p-6">
                        <div class="w-12 h-12 bg-accent/10 rounded-xl flex items-center justify-center mb-4">
                            <i data-lucide="shield-check" class="w-6 h-6 text-accent"></i>
                        </div>
                        <h3 class="card-title text-lg">Datenschutz</h3>
                        <p class="text-sm text-base-content/70">Deine Gesundheitsdaten bleiben privat und sicher auf deinem Ger√§t.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scroll Indicator -->
    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 animate-bounce">
        <i data-lucide="chevron-down" class="w-6 h-6 text-base-content/50"></i>
    </div>
</section>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 max-w-7xl space-y-8">

        <!-- Progress Hub -->
<section id="progress-hub" class="card bg-base-100 shadow-xl border border-base-300">
    <div class="card-body">
        <div class="flex justify-between items-center mb-6">
            <div class="flex items-center gap-3">
                <div class="avatar placeholder">
                    <div class="bg-primary text-primary-content rounded-full w-10 h-10">
                        <i data-lucide="target" class="w-5 h-5"></i>
                    </div>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-base-content">Fortschrittshub</h2>
                    <p class="text-base-content/70">Verfolge deine Ziele und Erfolge</p>
                </div>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tabs tabs-boxed mb-6">
            <button id="tab-today" class="tab tab-active">Heute</button>
            <button id="tab-week" class="tab">Woche</button>
            <li id="tab-goals" class="tab tab-bordered">Ziele</li>
            <li id="tab-achievements" class="tab tab-bordered">Erfolge</li>
        </div>

        <!-- Content Container -->
        <div id="progress-content" class="min-h-[400px]">
            <!-- Die ProgressHub Klasse f√ºllt diesen Container automatisch -->
            <div class="text-center py-12">
                <div class="text-4xl mb-4">üìä</div>
                <p class="text-base-content/70">Progress Hub wird geladen...</p>
            </div>
        </div>
    </div>
</section>

        <!-- Enhanced Analytics Section -->
<section id="analytics" class="card bg-gradient-to-br from-base-100 via-base-50 to-base-100 shadow-2xl border border-base-300/50 backdrop-blur-sm">
    <div class="card-body p-8">
        <!-- Enhanced Header Section -->
        <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-4">
            <div class="flex items-center gap-4">
                <div class="avatar placeholder">
                    <div class="bg-gradient-to-br from-primary via-secondary to-accent text-primary-content rounded-xl w-12 h-12 shadow-lg">
                        <i data-lucide="bar-chart-3" class="w-6 h-6"></i>
                    </div>
                </div>
                <div>
                    <h2 class="text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                        Analytics Dashboard
                    </h2>
                    <p class="text-base-content/70 text-lg">Entdecke Muster in deinen Gesundheitsdaten</p>
                    <div class="flex items-center gap-2 mt-2">
                        <div class="badge badge-primary badge-sm gap-1">
                            <i data-lucide="trending-up" class="w-3 h-3"></i>
                            Live-Analyse
                        </div>
                        <div class="badge badge-success badge-sm gap-1">
                            <i data-lucide="brain" class="w-3 h-3"></i>
                            KI-Insights
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Period Filter -->
            <div class="flex flex-col lg:flex-row gap-3">
                <div class="flex gap-1 bg-base-200/50 rounded-lg p-1 backdrop-blur-sm">
                    <button class="btn btn-sm btn-primary shadow-md" data-period="7">
                        <i data-lucide="calendar" class="w-4 h-4"></i>
                        7 Tage
                    </button>
                    <button class="btn btn-sm btn-ghost hover:btn-primary transition-all duration-200" data-period="30">
                        30 Tage
                    </button>
                    <button class="btn btn-sm btn-ghost hover:btn-primary transition-all duration-200" data-period="90">
                        90 Tage
                    </button>
                </div>

                <!-- Export & Refresh Actions -->
                <div class="flex gap-2">
                    <button class="btn btn-sm btn-outline btn-accent gap-2 hover:shadow-lg transition-all duration-200">
                        <i data-lucide="download" class="w-4 h-4"></i>
                        <span class="hidden sm:inline">Export</span>
                    </button>
                    <button class="btn btn-sm btn-ghost btn-circle hover:btn-secondary transition-all duration-200" 
                            onclick="healthTracker.analyticsEngine?.updateAllAnalytics()">
                        <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Quick Stats Overview -->
        <div class="stats stats-vertical lg:stats-horizontal shadow-lg bg-gradient-to-r from-base-100 to-base-200 mb-8 w-full">
            <div class="stat place-items-center">
                <div class="stat-figure text-primary">
                    <i data-lucide="activity" class="w-8 h-8"></i>
                </div>
                <div class="stat-title">Gesamt-Eintr√§ge</div>
                <div class="stat-value text-primary" id="analytics-total-entries">0</div>
                <div class="stat-desc">Alle Daten</div>
            </div>
            <div class="stat place-items-center">
                <div class="stat-figure text-success">
                    <i data-lucide="trending-up" class="w-8 h-8"></i>
                </div>
                <div class="stat-title">Verbesserung</div>
                <div class="stat-value text-success" id="analytics-improvement">+12%</div>
                <div class="stat-desc">Diese Woche</div>
            </div>
            <div class="stat place-items-center">
                <div class="stat-figure text-warning">
                    <i data-lucide="target" class="w-8 h-8"></i>
                </div>
                <div class="stat-title">Zielrate</div>
                <div class="stat-value text-warning" id="analytics-goal-rate">78%</div>
                <div class="stat-desc">Durchschnitt</div>
            </div>
            <div class="stat place-items-center">
                <div class="stat-figure text-info">
                    <i data-lucide="flame" class="w-8 h-8"></i>
                </div>
                <div class="stat-title">Streak</div>
                <div class="stat-value text-info" id="analytics-streak">5</div>
                <div class="stat-desc">Tage aktiv</div>
            </div>
        </div>

        <!-- Enhanced Charts Grid -->
        <div class="grid grid-cols-1 xl:grid-cols-2 gap-6 mb-8">
            <!-- Enhanced Trend Chart -->
            <div class="card bg-gradient-to-br from-base-100 to-base-200/50 border border-base-300/50 shadow-xl hover:shadow-2xl transition-all duration-300 group">
                <div class="card-body p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="card-title text-xl flex items-center gap-2">
                            <i data-lucide="trending-up" class="w-5 h-5 text-primary"></i>
                            Trends & Entwicklung
                        </h3>
                        <div class="indicator">
                            <span class="indicator-item indicator-top indicator-end badge badge-primary badge-xs">Live</span>
                            <div class="dropdown dropdown-end">
                                <div tabindex="0" role="button" class="btn btn-ghost btn-sm btn-circle">
                                    <i data-lucide="more-horizontal" class="w-4 h-4"></i>
                                </div>
                                <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow-lg border border-base-300/50">
                                    <li><button class="gap-2" data-metric="steps">
                                        <i data-lucide="footprints" class="w-4 h-4 text-success"></i>
                                        Schritte
                                    </button></li>
                                    <li><button class="gap-2" data-metric="water">
                                        <i data-lucide="droplets" class="w-4 h-4 text-info"></i>
                                        Wasser
                                    </button></li>
                                    <li><button class="gap-2" data-metric="sleep">
                                        <i data-lucide="moon" class="w-4 h-4 text-warning"></i>
                                        Schlaf
                                    </button></li>
                                    <li><button class="gap-2" data-metric="weight">
                                        <i data-lucide="scale" class="w-4 h-4 text-secondary"></i>
                                        Gewicht
                                    </button></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Metric Selection Tabs -->
                    <div class="tabs tabs-boxed mb-4">
                        <button class="tab tab-active" data-metric="steps">
                            <i data-lucide="footprints" class="w-4 h-4 mr-1"></i>
                            Schritte
                        </button>
                        <button class="tab" data-metric="water">
                            <i data-lucide="droplets" class="w-4 h-4 mr-1"></i>
                            Wasser
                        </button>
                        <button class="tab" data-metric="sleep">
                            <i data-lucide="moon" class="w-4 h-4 mr-1"></i>
                            Schlaf
                        </button>
                        <button class="tab" data-metric="weight">
                            <i data-lucide="scale" class="w-4 h-4 mr-1"></i>
                            Gewicht
                        </button>
                    </div>

                    <div class="h-64 relative">
                        <canvas id="trends-chart" class="rounded-lg"></canvas>
                        <div class="absolute inset-0 flex items-center justify-center hidden" id="trends-loading">
                            <span class="loading loading-spinner loading-lg text-primary"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Activity Heatmap -->
            <div class="card bg-gradient-to-br from-base-100 to-base-200/50 border border-base-300/50 shadow-xl hover:shadow-2xl transition-all duration-300">
                <div class="card-body p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="card-title text-xl flex items-center gap-2">
                            <i data-lucide="calendar-heat" class="w-5 h-5 text-warning"></i>
                            Aktivit√§ts-Heatmap
                        </h3>
                        <div class="tooltip tooltip-left" data-tip="Zeigt deine Aktivit√§tsmuster √ºber Zeit">
                            <div class="badge badge-info gap-1">
                                <i data-lucide="info" class="w-3 h-3"></i>
                                Pattern
                            </div>
                        </div>
                    </div>

                    <div id="heatmap-chart" class="h-64 relative">
                        <!-- Enhanced Heatmap wird hier generiert -->
                        <div class="absolute inset-0 flex items-center justify-center" id="heatmap-placeholder">
                            <div class="text-center">
                                <i data-lucide="calendar" class="w-12 h-12 text-base-content/30 mx-auto mb-2"></i>
                                <p class="text-base-content/60 text-sm">Heatmap wird geladen...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Insights Section -->
        <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
            <!-- AI-Powered Insights -->
            <div class="card bg-gradient-to-br from-primary/5 to-secondary/5 border border-primary/20 shadow-xl">
                <div class="card-body p-6">
                    <h3 class="card-title text-xl mb-6 flex items-center gap-3">
                        <i data-lucide="brain" class="w-6 h-6 text-primary"></i>
                        KI-Datenerkenntnisse
                        <div class="badge badge-primary badge-sm">Neu</div>
                    </h3>

                    <div id="analytics-insights" class="space-y-4">
                        <!-- Enhanced Insights werden hier eingef√ºgt -->
                        <div class="alert alert-info shadow-sm">
                            <i data-lucide="trending-up" class="w-5 h-5"></i>
                            <div>
                                <h4 class="font-semibold">Positive Entwicklung</h4>
                                <p class="text-sm opacity-80">Deine Schrittanzahl ist in den letzten 7 Tagen um 15% gestiegen!</p>
                            </div>
                        </div>

                        <div class="alert alert-warning shadow-sm">
                            <i data-lucide="moon" class="w-5 h-5"></i>
                            <div>
                                <h4 class="font-semibold">Schlafoptimierung</h4>
                                <p class="text-sm opacity-80">An Tagen mit mehr Wasserzufuhr schl√§fst du durchschnittlich 30 Min. besser.</p>
                            </div>
                        </div>

                        <div class="alert alert-success shadow-sm">
                            <i data-lucide="trophy" class="w-5 h-5"></i>
                            <div>
                                <h4 class="font-semibold">Zielerreichung</h4>
                                <p class="text-sm opacity-80">Du erreichst deine Wasserziele zu 85% - gro√üartig!</p>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex gap-2 mt-6">
                        <button class="btn btn-primary btn-sm gap-2">
                            <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                            Aktualisieren
                        </button>
                        <button class="btn btn-outline btn-sm gap-2">
                            <i data-lucide="share-2" class="w-4 h-4"></i>
                            Teilen
                        </button>
                    </div>
                </div>
            </div>

            <!-- Enhanced Correlations -->
            <div class="card bg-gradient-to-br from-secondary/5 to-accent/5 border border-secondary/20 shadow-xl">
                <div class="card-body p-6">
                    <h3 class="card-title text-xl mb-6 flex items-center gap-3">
                        <i data-lucide="git-branch" class="w-6 h-6 text-secondary"></i>
                        Datenkorrelationen
                        <div class="badge badge-secondary badge-sm">Analyse</div>
                    </h3>

                    <div id="correlation-insights" class="space-y-4">
                        <!-- Enhanced Correlation insights werden hier eingef√ºgt -->
                        <div class="bg-base-100 rounded-lg p-4 shadow-sm border border-base-300/50">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium flex items-center gap-2">
                                    <i data-lucide="footprints" class="w-4 h-4 text-success"></i>
                                    Schritte ‚Üî Schlaf
                                </span>
                                <div class="badge badge-success">Stark positiv</div>
                            </div>
                            <div class="w-full bg-base-300 rounded-full h-2">
                                <div class="bg-success h-2 rounded-full" style="width: 75%"></div>
                            </div>
                            <p class="text-xs text-base-content/70 mt-1">Mehr Schritte = besserer Schlaf</p>
                        </div>

                        <div class="bg-base-100 rounded-lg p-4 shadow-sm border border-base-300/50">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium flex items-center gap-2">
                                    <i data-lucide="droplets" class="w-4 h-4 text-info"></i>
                                    Wasser ‚Üî Energie
                                </span>
                                <div class="badge badge-info">Mittel positiv</div>
                            </div>
                            <div class="w-full bg-base-300 rounded-full h-2">
                                <div class="bg-info h-2 rounded-full" style="width: 60%"></div>
                            </div>
                            <p class="text-xs text-base-content/70 mt-1">Ausreichend Trinken steigert das Wohlbefinden</p>
                        </div>

                        <div class="bg-base-100 rounded-lg p-4 shadow-sm border border-base-300/50">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium flex items-center gap-2">
                                    <i data-lucide="moon" class="w-4 h-4 text-warning"></i>
                                    Schlaf ‚Üî Gewicht
                                </span>
                                <div class="badge badge-warning">Schwach negativ</div>
                            </div>
                            <div class="w-full bg-base-300 rounded-full h-2">
                                <div class="bg-warning h-2 rounded-full" style="width: 30%"></div>
                            </div>
                            <p class="text-xs text-base-content/70 mt-1">Zu wenig Schlaf kann Gewichtszunahme f√∂rdern</p>
                        </div>
                    </div>

                    <!-- Export Options -->
                    <div class="flex gap-2 mt-6">
                        <button class="btn btn-secondary btn-sm gap-2">
                            <i data-lucide="download" class="w-4 h-4"></i>
                            Report
                        </button>
                        <button class="btn btn-outline btn-sm gap-2">
                            <i data-lucide="mail" class="w-4 h-4"></i>
                            Senden
                        </button>
                    </div>
                </div>
            </div>
</section>

        <!-- Data Entry & Activity Feed -->
        <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
            <!-- Health Data Form -->
            <div class="xl:col-span-2">
                <div class="card bg-base-100 shadow-xl border border-base-300">
                    <div class="card-body">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="avatar placeholder">
                                <div class="bg-primary text-primary-content rounded-full w-10 h-10">
                                    <i data-lucide="plus-circle" class="w-5 h-5"></i>
                                </div>
                            </div>
                            <div>
                                <h2 class="card-title">Gesundheitsdaten eingeben</h2>
                                <p class="text-base-content/70">Verfolge deine t√§glichen Gesundheitsmetriken</p>
                            </div>
                        </div>
                        
                        <form id="health-form" class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Date Input -->
                                <div class="form-control md:col-span-2">
                                    <label class="label">
                                        <span class="label-text font-medium">Datum</span>
                                    </label>
                                    <input type="date" name="date" 
                                           class="input input-bordered focus:input-primary" 
                                           required>
                                </div>

                                <!-- Weight -->
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text font-medium flex items-center gap-2">
                                            <i data-lucide="scale" class="w-4 h-4 text-secondary"></i>
                                            Gewicht (kg)
                                        </span>
                                    </label>
                                    <input type="number" name="weight" step="0.1" placeholder="75.5" 
                                           class="input input-bordered focus:input-secondary" 
                                           min="20" max="500">
                                </div>
                                
                                <!-- Steps -->
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text font-medium flex items-center gap-2">
                                            <i data-lucide="footprints" class="w-4 h-4 text-success"></i>
                                            Schritte
                                        </span>
                                    </label>
                                    <input type="number" name="steps" placeholder="8500" 
                                           class="input input-bordered focus:input-success" 
                                           min="0" max="100000">
                                </div>
                                
                                <!-- Water -->
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text font-medium flex items-center gap-2">
                                            <i data-lucide="droplets" class="w-4 h-4 text-info"></i>
                                            Wasser (Liter)
                                        </span>
                                    </label>
                                    <input type="number" name="waterIntake" step="0.1" placeholder="2.1" 
                                           class="input input-bordered focus:input-info" 
                                           min="0" max="10">
                                </div>
                                
                                <!-- Sleep -->
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text font-medium flex items-center gap-2">
                                            <i data-lucide="moon" class="w-4 h-4 text-warning"></i>
                                            Schlaf (Stunden)
                                        </span>
                                    </label>
                                    <input type="number" name="sleepHours" step="0.1" placeholder="7.5" 
                                           class="input input-bordered focus:input-warning" 
                                           min="0" max="24">
                                </div>
                            </div>
                            
                            <!-- Mood -->
                            <div class="form-control">
                                <label class="label">
                                    <span class="label-text font-medium flex items-center gap-2">
                                        <i data-lucide="smile" class="w-4 h-4 text-accent"></i>
                                        Stimmung
                                    </span>
                                </label>
                                <select name="mood" class="select select-bordered focus:select-accent">
                                    <option value="">Stimmung w√§hlen</option>
                                    <option value="excellent">üòä Ausgezeichnet</option>
                                    <option value="good">üôÇ Gut</option>
                                    <option value="neutral">üòê Neutral</option>
                                    <option value="bad">üòû Schlecht</option>
                                    <option value="terrible">üò¢ Furchtbar</option>
                                </select>
                            </div>
                            
                            <!-- Notes -->
                            <div class="form-control">
                                <label class="label">
                                    <span class="label-text font-medium flex items-center gap-2">
                                        <i data-lucide="file-text" class="w-4 h-4 text-primary"></i>
                                        Notizen
                                    </span>
                                </label>
                                <textarea name="notes" placeholder="Wie war dein Tag?" 
                                          class="textarea textarea-bordered focus:textarea-primary h-20"></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-block gap-2">
                                <i data-lucide="save" class="w-4 h-4"></i>
                                Daten speichern
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Recent Activities -->
            <div class="card bg-base-100 shadow-xl border border-base-300">
                <div class="card-body">
                    <div class="flex justify-between items-center mb-4">
                        <div class="flex items-center gap-2">
                            <i data-lucide="clock" class="w-5 h-5 text-primary"></i>
                            <h2 class="card-title">Letzte Aktivit√§ten</h2>
                        </div>
                        <button id="refresh-activities-btn" 
                                class="btn btn-ghost btn-circle btn-sm tooltip" 
                                data-tip="Aktualisieren">
                            <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
                        </button>
                    </div>

                    <!-- Activities Timeline -->
                    <div id="recent-activities" class="space-y-4 max-h-96 overflow-y-auto">
                        <!-- Activities werden hier eingef√ºgt -->
                    </div>

                    <!-- Empty State -->
                    <div id="activities-empty" class="text-center py-8">
                        <i data-lucide="inbox" class="w-12 h-12 mx-auto mb-3 opacity-50"></i>
                        <p class="font-medium text-base-content/70">Noch keine Aktivit√§ten</p>
                        <p class="text-sm text-base-content/60">F√ºge deine ersten Gesundheitsdaten hinzu!</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Goals Modal -->
    <dialog id="goals-modal" class="modal">
        <div class="modal-box max-w-4xl">
            <div class="flex justify-between items-center mb-6 pb-4 border-b border-base-300">
                <div class="flex items-center gap-3">
                    <div class="avatar placeholder">
                        <div class="bg-primary text-primary-content rounded-full w-12 h-12">
                            <i data-lucide="target" class="w-6 h-6"></i>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-base-content">Ziele anpassen</h3>
                        <p class="text-sm text-base-content/70">Setze deine pers√∂nlichen Gesundheitsziele</p>
                    </div>
                </div>
                <form method="dialog">
                    <button class="btn btn-ghost btn-sm btn-circle">
                        <i data-lucide="x" class="w-5 h-5"></i>
                    </button>
                </form>
            </div>

            <form id="goals-form" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Weight Goal -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-semibold flex items-center gap-2">
                                <i data-lucide="scale" class="w-4 h-4 text-secondary"></i>
                                Gewichtsziel
                            </span>
                            <span class="label-text-alt text-base-content/60">Optional</span>
                        </label>
                        <div class="join">
                            <input type="number" name="weightGoal" 
                                   class="input input-bordered join-item flex-1 focus:input-secondary" 
                                   placeholder="70" min="30" max="300" step="0.1">
                            <span class="join-item bg-base-200 px-4 flex items-center text-base-content/80 font-medium">kg</span>
                        </div>
                        <label class="label">
                            <span class="label-text-alt text-base-content/60">Dein Zielgewicht (leer lassen falls kein Ziel)</span>
                        </label>
                    </div>

                    <!-- Steps Goal -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-semibold flex items-center gap-2">
                                <i data-lucide="footprints" class="w-4 h-4 text-success"></i>
                                Schrittziel
                            </span>
                        </label>
                        <div class="join">
                            <input type="number" name="stepsGoal" 
                                   class="input input-bordered join-item flex-1 focus:input-success" 
                                   placeholder="10000" min="1000" max="50000" required>
                            <span class="join-item bg-base-200 px-4 flex items-center text-base-content/80 font-medium">Schritte</span>
                        </div>
                        <label class="label">
                            <span class="label-text-alt text-base-content/60">T√§gliche Schritte (empfohlen: 10.000)</span>
                        </label>
                    </div>

                    <!-- Water Goal -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-semibold flex items-center gap-2">
                                <i data-lucide="droplets" class="w-4 h-4 text-info"></i>
                                Wasserziel
                            </span>
                        </label>
                        <div class="join">
                            <input type="number" name="waterGoal" 
                                   class="input input-bordered join-item flex-1 focus:input-info" 
                                   placeholder="2.0" min="0.5" max="10" step="0.1" required>
                            <span class="join-item bg-base-200 px-4 flex items-center text-base-content/80 font-medium">Liter</span>
                        </div>
                        <label class="label">
                            <span class="label-text-alt text-base-content/60">T√§gliche Wassermenge (empfohlen: 2-3L)</span>
                        </label>
                    </div>

                    <!-- Sleep Goal -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-semibold flex items-center gap-2">
                                <i data-lucide="moon" class="w-4 h-4 text-warning"></i>
                                Schlafziel
                            </span>
                        </label>
                        <div class="join">
                            <input type="number" name="sleepGoal" 
                                   class="input input-bordered join-item flex-1 focus:input-warning" 
                                   placeholder="8" min="4" max="12" step="0.5" required>
                            <span class="join-item bg-base-200 px-4 flex items-center text-base-content/80 font-medium">Stunden</span>
                        </div>
                        <label class="label">
                            <span class="label-text-alt text-base-content/60">Nachtschlaf-Dauer (empfohlen: 7-9h)</span>
                        </label>
                    </div>
                </div>

                <div class="alert alert-info">
                    <i data-lucide="lightbulb" class="w-5 h-5"></i>
                    <div>
                        <h4 class="font-bold">Tipp f√ºr realistische Ziele:</h4>
                        <div class="text-sm mt-1">
                            Setze dir erreichbare Ziele, die du schrittweise steigern kannst. 
                            Kleine, konstante Fortschritte sind besser als unrealistische Ziele.
                        </div>
                    </div>
                </div>

                <div class="modal-action pt-6 border-t border-base-300">
                    <form method="dialog">
                        <button type="button" class="btn btn-ghost">Abbrechen</button>
                    </form>
                    <button type="submit" class="btn btn-primary gap-2">
                        <i data-lucide="save" class="w-4 h-4"></i>
                        Ziele speichern
                    </button>
                </div>
            </form>
        </div>
        <form method="dialog" class="modal-backdrop">
            <button>close</button>
        </form>
    </dialog>

    <!-- Data Retention Modal -->
<dialog id="data-retention-modal" class="modal">
    <div class="modal-box">
        <h3 class="font-bold text-lg mb-4">
            <i data-lucide="clock" class="w-6 h-6 inline mr-2"></i>
            Automatische Datenbereinigung
        </h3>
        
        <div class="alert alert-info mb-4">
            <i data-lucide="info" class="w-5 h-5"></i>
            <div>
                <strong>Datenbereinigung wurde ausgef√ºhrt</strong>
                <p class="text-sm mt-1" id="retention-details">Alte Eintr√§ge wurden automatisch entfernt</p>
            </div>
        </div>

        <div class="stats stats-vertical w-full mb-4">
            <div class="stat">
                <div class="stat-title">Entfernte Eintr√§ge</div>
                <div class="stat-value text-sm" id="removed-entries">0</div>
            </div>
            <div class="stat">
                <div class="stat-title">Cutoff-Datum</div>
                <div class="stat-value text-sm" id="cutoff-date">-</div>
            </div>
        </div>

        <div class="modal-action">
            <button class="btn btn-primary" onclick="this.closest('.modal').close()">Verstanden</button>
        </div>
    </div>
</dialog>

<!-- Biometric Setup Modal -->
<dialog id="biometric-setup-modal" class="modal">
    <div class="modal-box">
        <h3 class="font-bold text-lg mb-4">
            <i data-lucide="fingerprint" class="w-6 h-6 inline mr-2"></i>
            Biometrische Entsperrung einrichten
        </h3>
        
        <div class="space-y-4">
            <div class="alert alert-warning">
                <i data-lucide="shield-alert" class="w-5 h-5"></i>
                <div>
                    <strong>Sicherheitshinweis</strong>
                    <p class="text-sm mt-1">Dein Ger√§t muss biometrische Authentifizierung unterst√ºtzen (Fingerabdruck, Face ID, etc.)</p>
                </div>
            </div>

            <div class="steps steps-vertical lg:steps-horizontal w-full">
                <div class="step step-primary" id="step-1">Berechtigung</div>
                <div class="step" id="step-2">Registrierung</div>
                <div class="step" id="step-3">Aktivierung</div>
            </div>

            <div id="biometric-status" class="text-center py-4">
                <div class="loading loading-spinner loading-md text-primary"></div>
                <p class="mt-2 text-sm text-base-content/70">Biometrische F√§higkeiten werden gepr√ºft...</p>
            </div>
        </div>

        <div class="modal-action">
            <button class="btn" onclick="this.closest('.modal').close()">Abbrechen</button>
            <button class="btn btn-primary" id="setup-biometric-btn" onclick="healthTracker.setupBiometric()" disabled>
                <i data-lucide="fingerprint" class="w-4 h-4 mr-2"></i>
                Einrichten
            </button>
        </div>
    </div>
</dialog>

<!-- Settings Validation Toast Container -->
<div id="settings-toast-container" class="toast toast-top toast-end z-50">
    <!-- Toasts werden hier dynamisch eingef√ºgt -->
</div>

    <!-- Notification Permission Modal -->
    <dialog id="notification-permission-modal" class="modal">
        <div class="modal-box">
            <div class="flex items-center gap-4 mb-4">
                <div class="avatar placeholder">
                    <div class="bg-primary text-primary-content rounded-full w-12 h-12">
                        <i data-lucide="bell" class="w-6 h-6"></i>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-bold">Bleib am Ball!</h3>
                    <p class="text-sm text-base-content/70">Erhalte hilfreiche Erinnerungen</p>
                </div>
            </div>
            
            <div class="mb-6">
                <p class="mb-4">Health Tracker Pro kann dich an wichtige Gewohnheiten erinnern:</p>
                <ul class="list-disc list-inside space-y-1 text-sm text-base-content/80">
                    <li>Wassererinnerungen alle 2 Stunden</li>
                    <li>Schritt-Motivation am Nachmittag</li>
                    <li>Schlafzeit-Erinnerung am Abend</li>
                    <li>T√§gliche Tracking-Erinnerung</li>
                </ul>
            </div>
            
            <div class="modal-action">
                <form method="dialog">
                    <button class="btn btn-ghost">Sp√§ter</button>
                </form>
                <button id="enable-notifications-btn" class="btn btn-primary">
                    <i data-lucide="bell" class="w-4 h-4"></i>
                    Benachrichtigungen aktivieren
                </button>
            </div>
        </div>
    </dialog>

    <!-- Enhanced Footer -->
<footer class="bg-gradient-to-br from-base-200 via-base-300 to-base-200 border-t border-base-300/50">
    <div class="container mx-auto px-4">
        <!-- Main Footer Content -->
        <div class="footer p-10 text-base-content">
            <!-- Brand & Description -->
            <aside class="flex flex-col items-start">
                <div class="flex items-center gap-3 mb-4">
                    <div class="avatar placeholder">
                        <div class="bg-gradient-to-br from-primary to-secondary text-primary-content rounded-xl w-12 h-12">
                            <i data-lucide="activity" class="w-6 h-6"></i>
                        </div>
                    </div>
                    <div>
                        <div class="text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                            Health Tracker Pro
                        </div>
                        <div class="text-sm text-base-content/70">Deine Gesundheit im Fokus</div>
                    </div>
                </div>
                <p class="text-base-content/80 max-w-sm leading-relaxed">
                    Offline-f√§hige Progressive Web App f√ºr umfassendes Gesundheits-Tracking mit 
                    <span class="font-semibold text-primary">100% Datenschutz</span>.
                </p>
                
                <!-- Feature Badges -->
                <div class="flex flex-wrap gap-2 mt-4">
                    <div class="badge badge-primary gap-1">
                        <i data-lucide="wifi-off" class="w-3 h-3"></i>
                        Offline-f√§hig
                    </div>
                    <div class="badge badge-success gap-1">
                        <i data-lucide="shield-check" class="w-3 h-3"></i>
                        Sicher
                    </div>
                    <div class="badge badge-secondary gap-1">
                        <i data-lucide="smartphone" class="w-3 h-3"></i>
                        PWA
                    </div>
                </div>
            </aside>

            <!-- Navigation Links -->
            <nav class="flex flex-col">
                <h6 class="footer-title text-primary">Navigation</h6>
                <a href="#dashboard" class="link link-hover flex items-center gap-2 py-1 hover:text-primary transition-colors">
                    <i data-lucide="home" class="w-4 h-4 text-primary/60"></i>
                    Dashboard
                </a>
                <a href="#progress-hub" class="link link-hover flex items-center gap-2 py-1 hover:text-success transition-colors">
                    <i data-lucide="target" class="w-4 h-4 text-success/60"></i>
                    Fortschritt
                </a>
                <a href="#analytics" class="link link-hover flex items-center gap-2 py-1 hover:text-info transition-colors">
                    <i data-lucide="bar-chart-3" class="w-4 h-4 text-info/60"></i>
                    Analytics
                </a>
                <a href="#health-form" class="link link-hover flex items-center gap-2 py-1 hover:text-accent transition-colors">
                    <i data-lucide="plus-circle" class="w-4 h-4 text-accent/60"></i>
                    Daten eingeben
                </a>
            </nav>

            <!-- Quick Actions -->
            <nav class="flex flex-col">
                <h6 class="footer-title text-secondary">Aktionen</h6>
                <button onclick="document.getElementById('goals-modal').showModal()" 
                        class="link link-hover flex items-center gap-2 py-1 hover:text-secondary transition-colors text-left">
                    <i data-lucide="target" class="w-4 h-4 text-secondary/60"></i>
                    Ziele verwalten
                </button>
                <button id="footer-theme-toggle" class="link link-hover flex items-center gap-2 py-1 hover:text-accent transition-colors text-left">
                    <i data-lucide="palette" class="w-4 h-4 text-accent/60"></i>
                    Design √§ndern
                </button>
                <button onclick="window.print()" class="link link-hover flex items-center gap-2 py-1 hover:text-info transition-colors text-left">
                    <i data-lucide="printer" class="w-4 h-4 text-info/60"></i>
                    Daten drucken
                </button>
                <button onclick="healthTracker.debugProgressHub?.()" class="link link-hover flex items-center gap-2 py-1 hover:text-warning transition-colors text-left">
                    <i data-lucide="bug" class="w-4 h-4 text-warning/60"></i>
                    Debug-Info
                </button>
            </nav>

            <!-- Health Categories -->
            <nav class="flex flex-col">
                <h6 class="footer-title text-accent">Tracking</h6>
                <div class="space-y-2">
                    <div class="flex items-center gap-2 text-sm text-base-content/70">
                        <i data-lucide="footprints" class="w-4 h-4 text-success"></i>
                        <span>Schritte & Aktivit√§t</span>
                    </div>
                    <div class="flex items-center gap-2 text-sm text-base-content/70">
                        <i data-lucide="droplets" class="w-4 h-4 text-info"></i>
                        <span>Wasser & Hydration</span>
                    </div>
                    <div class="flex items-center gap-2 text-sm text-base-content/70">
                        <i data-lucide="moon" class="w-4 h-4 text-warning"></i>
                        <span>Schlaf & Erholung</span>
                    </div>
                    <div class="flex items-center gap-2 text-sm text-base-content/70">
                        <i data-lucide="scale" class="w-4 h-4 text-secondary"></i>
                        <span>Gewicht & K√∂rperdaten</span>
                    </div>
                </div>
            </nav>
        </div>

        <!-- Stats Section -->
        <div class="py-6 border-t border-base-300/50">
            <div class="stats stats-vertical lg:stats-horizontal shadow-sm bg-base-100/50 w-full">
                <div class="stat place-items-center">
                    <div class="stat-title">Eintr√§ge heute</div>
                    <div class="stat-value text-2xl text-primary" id="footer-today-entries">0</div>
                    <div class="stat-desc">Tracking-Sessions</div>
                </div>
                <div class="stat place-items-center">
                    <div class="stat-title">Diese Woche</div>
                    <div class="stat-value text-2xl text-success" id="footer-week-entries">0</div>
                    <div class="stat-desc">Gesamt-Eintr√§ge</div>
                </div>
                <div class="stat place-items-center">
                    <div class="stat-title">Ziele erreicht</div>
                    <div class="stat-value text-2xl text-accent" id="footer-goals-achieved">0</div>
                    <div class="stat-desc">Heute</div>
                </div>
                <div class="stat place-items-center">
                    <div class="stat-title">Streak</div>
                    <div class="stat-value text-2xl text-warning" id="footer-current-streak">0</div>
                    <div class="stat-desc">Tage am St√ºck</div>
                </div>
            </div>
        </div>

        <!-- Bottom Bar -->
        <div class="footer footer-center p-4 border-t border-base-300/50 text-base-content/70">
            <aside class="flex flex-col lg:flex-row items-center justify-between w-full max-w-6xl">
                <!-- Copyright -->
                <div class="flex flex-col lg:flex-row items-center gap-2">
                    <p class="font-medium">
                        &copy; 2025 <span class="text-primary font-bold">Health Tracker Pro</span>
                    </p>
                    <div class="divider divider-horizontal hidden lg:block"></div>
                    <div class="flex items-center gap-1">
                        <i data-lucide="heart" class="w-4 h-4 text-error"></i>
                        <span class="text-sm">Made with Love f√ºr deine Gesundheit</span>
                    </div>
                </div>

                <!-- Tech Stack & Status -->
                <div class="flex flex-col lg:flex-row items-center gap-4 mt-2 lg:mt-0">
                    <!-- Connection Status -->
                    <div class="flex items-center gap-2">
                        <div class="indicator">
                            <span class="indicator-item indicator-top indicator-end badge badge-success badge-xs animate-pulse"></span>
                            <div class="badge badge-ghost gap-1" id="footer-connection-status">
                                <span class="text-xs">Online</span>
                            </div>
                        </div>
                    </div>

                    <!-- Version Info -->
        <div class="text-center pt-4 border-t border-base-300">
          <p class="text-xs text-base-content opacity-60">
            Health Tracker Pro v2.1.0 | 
            <span id="footer-build-date">Build: 08.08.2025</span> | 
            <span id="footer-cache-status">Cache: Aktiv</span>
          </p>
        </div>

                    <!-- Social Actions -->
                    <div class="flex gap-2">
                        <div class="tooltip tooltip-top" data-tip="Teile die App">
                            <button onclick="navigator.share?.({title: 'Health Tracker Pro', url: window.location.href})" 
                                    class="btn btn-ghost btn-xs btn-circle hover:btn-primary">
                                <i data-lucide="share-2" class="w-3 h-3"></i>
                            </button>
                        </div>
                        <div class="tooltip tooltip-top" data-tip="Feedback senden">
                            <button onclick="window.open('mailto:feedback@healthtracker.com?subject=Health Tracker Pro Feedback')"
                                    class="btn btn-ghost btn-xs btn-circle hover:btn-secondary">
                                <i data-lucide="mail" class="w-3 h-3"></i>
                            </button>
                        </div>
                        <div class="tooltip tooltip-top" data-tip="GitHub Repository">
                            <a href="#" target="_blank" class="btn btn-ghost btn-xs btn-circle hover:btn-accent">
                                <i data-lucide="github" class="w-3 h-3"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </div>
</footer>

<!-- Startup Loading Indicator -->
<div id="startup-loader" class="fixed inset-0 bg-base-100 z-50 flex items-center justify-center">
    <div class="text-center">
        <div class="loading loading-spinner loading-lg text-primary mb-4"></div>
        <p class="text-base-content/70">Einstellungen werden initialisiert...</p>
    </div>
</div>

<!-- Hidden Settings Initialization Tracker -->
<div id="settings-init-status" class="hidden" 
     data-theme-loaded="false" 
     data-retention-checked="false" 
     data-permissions-checked="false">
</div>

    <!-- JavaScript -->
    <script src="/js/app.js"></script>
    <script>
// === STARTUP INITIALIZATION ===
document.addEventListener('DOMContentLoaded', function() {
    console.log('üöÄ App startup initialization');
    
    // Startup Loader anzeigen
    const loader = document.getElementById('startup-loader');
    const initStatus = document.getElementById('settings-init-status');
    
    // Theme sofort laden (vor Health Tracker Init)
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    initStatus.setAttribute('data-theme-loaded', 'true');
    
    // Retention Check Status setzen
    const lastCheck = localStorage.getItem('lastRetentionCheck');
    const today = new Date().toDateString();
    initStatus.setAttribute('data-retention-checked', lastCheck === today);
    
    // Permission Status pr√ºfen
    if ('Notification' in window) {
        initStatus.setAttribute('data-permissions-checked', Notification.permission !== 'default');
    }
    
    // Startup Loader nach kurzer Zeit ausblenden
    setTimeout(() => {
        if (loader) {
            loader.style.opacity = '0';
            loader.style.transition = 'opacity 0.3s ease';
            setTimeout(() => loader.remove(), 300);
        }
    }, 1000);
});

// === SETTINGS VALIDATION HELPER ===
function validateSettingsInput(inputElement, validationRules) {
    const value = inputElement.value;
    const isValid = validationRules.test ? validationRules.test(value) : true;
    
    // Visual Feedback
    if (isValid) {
        inputElement.classList.remove('input-error');
        inputElement.classList.add('input-success');
    } else {
        inputElement.classList.remove('input-success');
        inputElement.classList.add('input-error');
    }
    
    return isValid;
}

// === ERROR BOUNDARY F√úR EINSTELLUNGEN ===
window.addEventListener('error', function(e) {
    if (e.error && e.error.message.includes('settings')) {
        console.error('‚ö†Ô∏è Settings Error:', e.error);
        
        // Fallback Settings anwenden
        if (typeof healthTracker !== 'undefined' && healthTracker.applyFallbackSettings) {
            healthTracker.applyFallbackSettings();
        }
    }
});
</script>
    <script>
        // Initialize Lucide Icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }

        // Set current date as default
        document.addEventListener('DOMContentLoaded', function() {
            const dateInput = document.querySelector('input[name="date"]');
            if (dateInput) {
                dateInput.value = new Date().toISOString().split('T')[0];
            }

            // Theme Toggle
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', function() {
                    const html = document.documentElement;
                    const currentTheme = html.getAttribute('data-theme');
                    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                    html.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    
                    // Update icon
                    const icon = themeToggle.querySelector('i');
                    icon.setAttribute('data-lucide', newTheme === 'light' ? 'moon' : 'sun');
                    lucide.createIcons();
                });
            }

            // Load saved theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
                const themeIcon = document.querySelector('#theme-toggle i');
                if (themeIcon) {
                    themeIcon.setAttribute('data-lucide', savedTheme === 'light' ? 'moon' : 'sun');
                    lucide.createIcons();
                }
            }

            // Initialize Health Tracker
            if (typeof HealthTracker !== 'undefined') {
                window.healthTracker = new HealthTracker();
            }
        });
    </script>
</body>
</html>
