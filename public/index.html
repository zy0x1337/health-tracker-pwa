<!DOCTYPE html>
<html lang="de" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Tracker Pro - Dein pers√∂nlicher Gesundheits-Tracker</title>
    
    <!-- PWA Meta Tags -->
    <meta name="app-version" content="2.1.0">
    <meta name="app-build" content="2025.08.08">
    <meta name="data-retention-default" content="365">
    <meta name="description" content="Verfolge deine Gesundheitsziele mit diesem modernen, professionellen Health Tracker. Offline-f√§hig und benutzerfreundlich.">
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Health Tracker Pro">

    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23667eea'><path d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z'/></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23667eea'><path d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z'/></svg>">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#667eea',
                        secondary: '#764ba2',
                        accent: '#f093fb'
                    }
                }
            }
        }
    </script>
    
    <!-- Chart.js f√ºr Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <script>
// === GLOBAL ERROR HANDLER ===
window.addEventListener('error', function(e) {
    console.error('üö® JavaScript Fehler:', e.error);
    if (e.error.message.includes('healthTracker')) {
        console.warn('‚ö†Ô∏è HealthTracker nicht verf√ºgbar - wird nachgeladen...');
    }
});

// === FALLBACK F√úR DROPDOWN-FUNKTIONEN ===
function fallbackShowSettings() {
    if (window.healthTracker && typeof window.healthTracker.showSettings === 'function') {
        window.healthTracker.showSettings();
    } else {
        alert('‚ö†Ô∏è Einstellungen werden geladen...');
        setTimeout(() => {
            if (window.healthTracker) {
                window.healthTracker.showSettings();
            }
        }, 1000);
    }
}
</script>

    <style>
        /* Custom CSS f√ºr optimale Performance */
        .input-error {
            @apply input-error border-error;
        }
        
        /* Chart Container Fixes */
        .analytics-view canvas {
            display: block !important;
            max-height: 400px !important;
        }
        
        /* Smooth Animations */
        .stat-card {
            transition: transform 0.2s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
        }
        
        /* Progress Animation */
        .progress {
            transition: all 0.3s ease;
        }
        
        /* Notification Animations */
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification-enter {
            animation: slideInRight 0.3s ease;
        }
        
        /* Loading Spinner */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .animate-spin-slow {
            animation: spin 2s linear infinite;
        }

        /* Heatmap Styles */
.heatmap-grid {
    max-width: 500px;
    margin: 0 auto;
}

.heatmap-cell {
    aspect-ratio: 1;
    min-height: 20px;
    border-radius: 2px;
    transition: all 0.2s ease;
    cursor: pointer;
}

.heatmap-cell:hover {
    transform: scale(1.1);
    border-color: #3b82f6 !important;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
}

/* Tooltip styles (falls du daisyUI Tooltips verwendest) */
.tooltip:before {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
}

/* Enhanced Navigation Animations */
.navbar {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.navbar:hover {
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
}

/* Smooth menu transitions */
.menu li > a {
    transition: all 0.2s ease-in-out;
    position: relative;
    overflow: hidden;
}

.menu li > a::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.5s;
}

.menu li > a:hover::before {
    left: 100%;
}

/* Enhanced badge animations */
.badge.animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Bottom navigation enhancements */
.btm-nav > * {
    transition: all 0.2s ease-in-out;
}

.btm-nav > *:hover {
    transform: translateY(-2px);
}

/* Dropdown enhancements */
.dropdown-content {
    animation: fadeInUp 0.2s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Button Hover Enhancements */
.btn:hover {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

/* Card Hover Effects */
.card:hover {
    transform: translateY(-4px);
}

/* Text Gradient Animation */
@keyframes gradient-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

.bg-gradient-to-r {
    background-size: 200% 200%;
    animation: gradient-shift 6s ease infinite;
}

/* Badge Pulse Effect */
.badge .animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Custom Shadow Classes */
.shadow-3xl {
    box-shadow: 0 35px 60px -12px rgba(0, 0, 0, 0.25);
}

/* Backdrop Blur Enhancement */
.backdrop-blur-sm {
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
}

/* Enhanced Responsive Typography */
@media (max-width: 640px) {
    .text-6xl {
        font-size: 3rem;
    }
    .text-7xl {
        font-size: 3.5rem;
    }
}

/* Enhanced Footer Animations */
.footer {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Hover effects for footer links */
.footer nav a:hover {
    transform: translateX(4px);
}

.footer nav button:hover {
    transform: translateX(4px);
}

/* Stats animation */
.stat-value {
    transition: all 0.3s ease;
}

.stat-value:hover {
    transform: scale(1.05);
}

/* Badge hover effects */
.badge {
    transition: all 0.2s ease;
}

.badge:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Enhanced social buttons */
.btn-circle:hover {
    transform: rotate(5deg) scale(1.1);
}

/* Enhanced Analytics Animations */
.analytics-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.analytics-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Chart container animations */
#trends-chart, #correlation-chart, #weekly-summary-chart, #goal-progress-chart {
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.chart-loading {
    opacity: 0.6;
    transform: scale(0.98);
}

/* Enhanced tab animations */
.tabs .tab {
    transition: all 0.2s ease;
}

.tabs .tab:hover {
    transform: translateY(-1px);
}

.tabs .tab-active {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Stats animation on load */
.stat-value {
    animation: countUp 1s ease-out;
}

@keyframes countUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Enhanced alert animations */
.alert {
    animation: slideInLeft 0.5s ease-out;
}

@keyframes slideInLeft {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Loading state transitions */
.loading-overlay {
    transition: opacity 0.3s ease;
}

/* Enhanced dropdown animations */
.dropdown-content {
    animation: dropdownFadeIn 0.2s ease-out;
}

@keyframes dropdownFadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Responsive grid enhancements */
@media (max-width: 768px) {
    .analytics-card .card-body {
        padding: 1rem;
    }
    
    .stats {
        grid-template-columns: 1fr;
    }
}

/* Theme-Vorschau Effekte */
.modal .card {
    transition: all 0.3s ease;
}

.modal .card:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.modal .card.ring-2 {
    transform: scale(1.02);
}

/* Theme-spezifische Verbesserungen */
.theme-health .hero {
    background: linear-gradient(135deg, oklch(65% 0.25 145), oklch(70% 0.2 160));
}

.theme-wellness .card {
    box-shadow: 0 4px 12px oklch(70% 0.15 140 / 0.2);
}

.theme-corporate .btn-primary {
    background: linear-gradient(135deg, oklch(45% 0.1 220), oklch(50% 0.15 200));
}

/* Smooth Theme Transitions */
* {
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}
/* Erweiterte Theme-spezifische Anpassungen */
.theme-nature {
    --nature-gradient: linear-gradient(135deg, oklch(70% 0.25 140), oklch(75% 0.2 160));
}

.theme-nature .hero {
    background: var(--nature-gradient);
}

.theme-retro .btn-primary {
    background: linear-gradient(135deg, oklch(65% 0.3 320), oklch(70% 0.35 340));
    border: none;
    box-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
}

.theme-luxury .card {
    background: linear-gradient(135deg, oklch(95% 0.02 80), oklch(98% 0.01 60));
    border: 1px solid oklch(85% 0.05 80);
}

.theme-neon .btn:hover {
    box-shadow: 0 0 30px currentColor;
    animation: neonPulse 1.5s infinite alternate;
}

@keyframes neonPulse {
    0% { box-shadow: 0 0 5px currentColor; }
    100% { box-shadow: 0 0 30px currentColor, 0 0 40px currentColor; }
}

/* Perfektionierte Theme-Transitions */
:root {
    --theme-transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

html, body, .card, .btn, .input, .select, .textarea, .modal-box {
    transition: var(--theme-transition);
}

/* Theme-spezifische Performance-Optimierungen */
.theme-animation-neon * {
    will-change: box-shadow, filter;
}

.theme-animation-luxury * {
    will-change: background, border-color;
}

/* Accessibility-Verbesserungen f√ºr Themes */
[data-theme*="dark"] {
    filter: contrast(var(--accessibility-contrast, 1)) brightness(var(--accessibility-brightness, 1));
}

/* Theme-Kategorien CSS */
.theme-nature {
    --nature-primary: oklch(65% 0.25 145);
    --nature-accent: oklch(75% 0.2 120);
}

.theme-neon {
    --neon-glow: 0 0 20px currentColor;
    --neon-animation: neonPulse 2s infinite alternate;
}

.theme-luxury {
    --luxury-gradient: linear-gradient(135deg, oklch(95% 0.02 80), oklch(98% 0.01 60));
    --luxury-border: 1px solid oklch(85% 0.05 80);
}

/* Responsive Theme Adjustments */
@media (max-width: 768px) {
    :root {
        --theme-transition: all 0.3s ease;
    }
    
    .theme-animation-neon .btn:hover {
        animation: none; /* Reduce animations on mobile */
    }
}

@media (prefers-reduced-motion: reduce) {
    :root {
        --theme-transition: none;
    }
    
    .theme-animation-neon .btn:hover {
        animation: none;
    }
}

/* === FEHLENDE THEME-KATEGORIEN === */
.theme-dark {
    --dark-accent: oklch(80% 0.2 200);
    --dark-glow: 0 0 15px rgba(59, 130, 246, 0.3);
}

.theme-corporate {
    --corporate-primary: oklch(45% 0.1 220);
    --corporate-secondary: oklch(50% 0.15 200);
    --corporate-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.theme-retro {
    --retro-neon: oklch(65% 0.3 320);
    --retro-glow: 0 0 20px rgba(255, 0, 255, 0.3);
}

/* === THEME-SPEZIFISCHE KOMPONENTEN === */
.theme-health .progress {
    background: linear-gradient(90deg, oklch(65% 0.25 145), oklch(70% 0.2 160));
}

.theme-nature .stats {
    background: var(--nature-gradient);
    border: 1px solid oklch(60% 0.2 140);
}

.theme-luxury .modal-box {
    background: var(--luxury-gradient);
    border: var(--luxury-border);
    backdrop-filter: blur(10px);
}

.theme-corporate .navbar {
    background: linear-gradient(135deg, var(--corporate-primary), var(--corporate-secondary));
    box-shadow: var(--corporate-shadow);
}

.theme-retro .alert {
    border: 2px solid var(--retro-neon);
    box-shadow: var(--retro-glow);
}

.theme-dark .card {
    background: oklch(20% 0.02 240);
    border: 1px solid oklch(30% 0.05 240);
    box-shadow: var(--dark-glow);
}

/* === LOADING ANIMATIONS PER THEME === */
.theme-neon .loading {
    color: oklch(70% 0.3 200);
    filter: drop-shadow(0 0 10px currentColor);
}

.theme-luxury .loading {
    color: oklch(60% 0.2 80);
}

.theme-nature .loading {
    color: oklch(65% 0.25 145);
}

/* === INTERACTIVE ELEMENTS === */
.theme-neon .btn-primary:active {
    transform: scale(0.95);
    box-shadow: 0 0 40px currentColor, 0 0 60px currentColor;
}

.theme-luxury .btn:hover {
    background: linear-gradient(135deg, oklch(85% 0.05 80), oklch(90% 0.03 60));
    transform: translateY(-1px);
    box-shadow: 0 4px 20px oklch(85% 0.05 80 / 0.3);
}

.theme-corporate .input:focus {
    border-color: var(--corporate-primary);
    box-shadow: 0 0 0 3px oklch(45% 0.1 220 / 0.1);
}

/* === TOAST/NOTIFICATION STYLES === */
.theme-neon .toast .alert {
    backdrop-filter: blur(10px);
    border: 1px solid currentColor;
    box-shadow: 0 0 20px currentColor;
}

.theme-luxury .toast .alert {
    background: var(--luxury-gradient);
    border: var(--luxury-border);
    backdrop-filter: blur(8px);
}

/* === SCROLLBAR THEMING === */
.theme-dark ::-webkit-scrollbar {
    width: 8px;
    background: oklch(25% 0.02 240);
}

.theme-dark ::-webkit-scrollbar-thumb {
    background: oklch(40% 0.05 240);
    border-radius: 4px;
}

.theme-luxury ::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, oklch(75% 0.05 80), oklch(80% 0.03 60));
}

/* === SELECTION STYLING === */
.theme-neon ::selection {
    background: oklch(70% 0.3 200 / 0.3);
    color: oklch(100% 0 0);
    text-shadow: 0 0 10px currentColor;
}

.theme-luxury ::selection {
    background: oklch(85% 0.05 80 / 0.4);
    color: oklch(20% 0.02 80);
}

.theme-nature ::selection {
    background: oklch(70% 0.25 140 / 0.3);
    color: oklch(100% 0 0);
}

/* === FOCUS INDICATORS === */
.theme-neon .btn:focus-visible {
    outline: 2px solid currentColor;
    outline-offset: 2px;
    box-shadow: 0 0 20px currentColor;
}

.theme-corporate .btn:focus-visible {
    outline: 2px solid var(--corporate-primary);
    outline-offset: 2px;
}

/* === ENHANCED BACKDROP EFFECTS === */
.theme-luxury .modal::backdrop {
    backdrop-filter: blur(12px) saturate(1.2);
    background: oklch(50% 0.02 80 / 0.2);
}

.theme-neon .modal::backdrop {
    backdrop-filter: blur(8px) hue-rotate(45deg);
    background: oklch(20% 0.1 200 / 0.3);
}

/* === SPECIAL HEALTH TRACKER STYLES === */
.theme-health .hero .btn {
    background: linear-gradient(135deg, oklch(70% 0.2 145), oklch(75% 0.25 160));
    border: none;
    color: oklch(100% 0 0);
    font-weight: 600;
}

.theme-health .stats .stat-value {
    background: linear-gradient(135deg, oklch(65% 0.25 145), oklch(70% 0.2 160));
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
}

/* === ERROR STATES === */
.theme-neon .input-error {
    border-color: oklch(70% 0.3 0);
    box-shadow: 0 0 15px oklch(70% 0.3 0 / 0.5);
}

.theme-luxury .alert-error {
    background: linear-gradient(135deg, oklch(95% 0.02 0), oklch(98% 0.01 20));
    border: 1px solid oklch(70% 0.25 0);
}

/* === HIGH CONTRAST MODE SUPPORT === */
@media (prefers-contrast: high) {
    .theme-luxury .card,
    .theme-nature .card {
        border-width: 2px;
        border-color: currentColor;
    }
    
    .theme-neon .btn {
        border: 2px solid currentColor;
    }
}

/* === PRINT STYLES === */
@media print {
    .theme-dark,
    .theme-neon,
    .theme-luxury {
        filter: none !important;
        background: white !important;
        color: black !important;
    }
    
    .theme-animation-neon *,
    .theme-animation-luxury * {
        animation: none !important;
        box-shadow: none !important;
    }
}

/* === RTL SUPPORT === */
[dir="rtl"] .theme-luxury .card {
    background: linear-gradient(-135deg, oklch(95% 0.02 80), oklch(98% 0.01 60));
}

[dir="rtl"] .theme-retro .btn-primary {
    background: linear-gradient(-135deg, oklch(65% 0.3 320), oklch(70% 0.35 340));
}

/* === PERFORMANCE OPTIMIZATIONS === */
.theme-animation-neon .btn,
.theme-animation-luxury .card {
    transform: translateZ(0); /* Force hardware acceleration */
}

.theme-neon .modal,
.theme-luxury .modal {
    contain: layout style paint;
}

/* === DROPDOWN THEMING === */
.theme-neon .dropdown-content {
    background: oklch(15% 0.05 240);
    border: 1px solid oklch(70% 0.3 200);
    box-shadow: 0 0 25px oklch(70% 0.3 200 / 0.4);
}

.theme-luxury .dropdown-content {
    background: var(--luxury-gradient);
    border: var(--luxury-border);
    backdrop-filter: blur(10px);
}

/* === TABS THEMING === */
.theme-corporate .tabs .tab-active {
    background: var(--corporate-primary);
    color: oklch(100% 0 0);
}

.theme-neon .tabs .tab-active {
    background: transparent;
    border-bottom: 2px solid oklch(70% 0.3 200);
    box-shadow: 0 2px 10px oklch(70% 0.3 200 / 0.5);
}

/* === BADGE THEMING === */
.theme-luxury .badge {
    background: linear-gradient(135deg, oklch(75% 0.05 80), oklch(80% 0.03 60));
    border: 1px solid oklch(65% 0.08 80);
}

.theme-neon .badge {
    background: oklch(70% 0.3 200);
    color: oklch(100% 0 0);
    box-shadow: 0 0 10px currentColor;
}

/* Navbar Enhancement Styles */

/* Smooth navbar animations */
.navbar {
    backdrop-filter: blur(8px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Enhanced dropdown animations */
.dropdown-content {
    animation: fadeInScale 0.2s ease-out;
}

@keyframes fadeInScale {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(-10px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Navbar scroll behavior */
.navbar.scrolled {
    background-color: rgba(255, 255, 255, 0.98);
    border-bottom-color: rgba(0, 0, 0, 0.1);
}

/* Active navigation indicators */
.btn[data-nav].active {
    background: linear-gradient(135deg, var(--p) 0%, var(--s) 100%);
    color: var(--pc);
    box-shadow: 0 4px 12px rgba(var(--p), 0.3);
}

/* Loading states */
.loading {
    position: relative;
    overflow: hidden;
}

.loading::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    animation: loading-shimmer 1.5s infinite;
}

@keyframes loading-shimmer {
    0% { left: -100%; }
    100% { left: 100%; }
}

/* Mobile menu improvements */
@media (max-width: 1024px) {
    .dropdown-content {
        max-height: 80vh;
        overflow-y: auto;
    }
}

/* === ENHANCED TOAST STYLES === */
#toast-container {
    position: fixed !important;
    bottom: 1rem !important;
    right: 1rem !important;
    z-index: 60 !important;
    pointer-events: none;
    max-height: calc(100vh - 2rem);
    overflow-y: auto;
    overflow-x: visible;
}

#toast-container .alert {
    pointer-events: auto;
    margin-bottom: 0.5rem;
    position: relative;
    backdrop-filter: blur(8px);
    border-radius: 0.75rem;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
}

/* Progress Bar Animation */
@keyframes progress-shrink {
    from { width: 100%; }
    to { width: 0%; }
}

/* Toast Slide Animations */
.toast-slide-in {
    animation: slideInFromRight 0.3s ease-out;
}

.toast-slide-out {
    animation: slideOutToRight 0.3s ease-in;
}

@keyframes slideInFromRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutToRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* Toast Hover Effects */
#toast-container .alert:hover {
    transform: scale(1.02);
    box-shadow: 0 20px 35px -5px rgba(0, 0, 0, 0.15), 0 10px 15px -6px rgba(0, 0, 0, 0.1);
}

/* Mobile Responsive */
@media (max-width: 640px) {
    #toast-container {
        left: 1rem;
        right: 1rem;
        bottom: calc(70px + 1rem); /* Above mobile navigation */
    }
    
    #toast-container .alert {
        min-width: auto;
        max-width: none;
    }
}

/* Dark mode adjustments */
@media (prefers-color-scheme: dark) {
    #toast-container .alert {
        backdrop-filter: blur(12px);
        border-color: rgba(255, 255, 255, 0.1);
    }
}

/* High contrast mode */
@media (prefers-contrast: high) {
    #toast-container .alert {
        border-width: 2px;
        box-shadow: none;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    #toast-container .alert,
    .toast-slide-in,
    .toast-slide-out {
        animation: none !important;
        transition: none !important;
    }
    
    @keyframes progress-shrink {
        from { width: 100%; }
        to { width: 100%; }
    }
}

/* Focus management for accessibility */
#toast-container .alert:focus-within {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
}

/* Stack behavior for multiple toasts */
#toast-container .alert:nth-last-child(n+4) {
    opacity: 0.8;
    transform: scale(0.95);
}

#toast-container .alert:nth-last-child(n+6) {
    display: none;
}

/* ABOUT MODAL TAB FIXES */
.about-modal .tab-panel {
    min-height: 200px;
    padding: 1rem 0;
}

.about-modal .tab-panel.hidden {
    display: none !important;
    opacity: 0;
}

.about-modal .tab-panel.block,
.about-modal .tab-panel.active {
    display: block !important;
    opacity: 1;
}

/* Force initial visibility for overview */
.about-modal #about-overview {
    display: block !important;
}

/* Hide other panels initially */
.about-modal #about-features,
.about-modal #about-stats,
.about-modal #about-tech {
    display: none !important;
}

/* Tab active state */
.about-modal .tab-active {
    background-color: hsl(var(--p));
    color: hsl(var(--pc));
    border-color: hsl(var(--p));
}

/* Content visibility */
.about-modal .tab-content {
    min-height: 400px;
}

/* Debug helper (nur in development) */
.about-modal .tab-panel[style*="display: block"] {
    border: 2px solid green !important; /* Nur zum Debuggen */
}
    </style>
</head>

<body class="min-h-screen bg-base-100">
    <!-- Enhanced Navigation mit vollst√§ndiger daisyUI Optimierung -->
<nav class="navbar bg-base-100/95 backdrop-blur-sm shadow-lg sticky top-0 z-40 border-b border-base-300/20">
    <!-- Navbar Start - Logo & Mobile Menu -->
    <div class="navbar-start">
        <!-- Mobile Dropdown Menu - Optimiert -->
        <div class="dropdown lg:hidden">
            <div tabindex="0" role="button" class="btn btn-ghost btn-circle btn-sm hover:bg-primary/10 transition-colors duration-200" aria-label="Men√º √∂ffnen">
                <i data-lucide="menu" class="w-5 h-5"></i>
            </div>
            <ul tabindex="0" class="menu menu-sm dropdown-content bg-base-100/95 backdrop-blur-md rounded-box z-[100] mt-3 w-72 p-3 shadow-2xl border border-base-300/30 animate-in fade-in slide-in-from-top-2 duration-200">
                <li class="menu-title mb-2">
                    <span class="text-base-content/70 font-semibold">Navigation</span>
                </li>
                <li>
                    <a href="#dashboard" class="gap-3 py-3 rounded-lg hover:bg-primary/10 hover:text-primary transition-all duration-200 group">
                        <i data-lucide="home" class="w-4 h-4 text-primary group-hover:scale-110 transition-transform"></i>
                        <span class="font-medium">Dashboard</span>
                        <div class="badge badge-primary badge-xs ml-auto"></div>
                    </a>
                </li>
                <li>
                    <a href="#progress-hub" class="gap-3 py-3 rounded-lg hover:bg-success/10 hover:text-success transition-all duration-200 group">
                        <i data-lucide="target" class="w-4 h-4 text-success group-hover:scale-110 transition-transform"></i>
                        <span class="font-medium">Fortschritt</span>
                    </a>
                </li>
                <li>
                    <a href="#analytics" class="gap-3 py-3 rounded-lg hover:bg-info/10 hover:text-info transition-all duration-200 group">
                        <i data-lucide="bar-chart-3" class="w-4 h-4 text-info group-hover:scale-110 transition-transform"></i>
                        <span class="font-medium">Analytics</span>
                    </a>
                </li>
                <div class="divider my-3 opacity-50"></div>
                <li class="mb-2">
                    <a href="#health-form" class="gap-3 py-3 rounded-lg bg-primary/5 hover:bg-primary/15 text-primary font-semibold transition-all duration-200 group border border-primary/20">
                        <i data-lucide="plus-circle" class="w-4 h-4 group-hover:rotate-90 transition-transform duration-300"></i>
                        <span>Daten eingeben</span>
                        <div class="badge badge-primary badge-outline badge-xs ml-auto animate-pulse">Neu</div>
                    </a>
                </li>
                <li>
                    <button class="gap-3 py-3 rounded-lg hover:bg-warning/10 hover:text-warning transition-all duration-200 group" onclick="healthTracker?.showSettings?.()">
                        <i data-lucide="settings" class="w-4 h-4 text-warning group-hover:rotate-90 transition-transform duration-500"></i>
                        <span class="font-medium">Einstellungen</span>
                    </button>
                </li>
            </ul>
        </div>
        
        <!-- Logo/Brand - Optimiert -->
        <a href="#dashboard" class="btn btn-ghost text-xl font-bold normal-case gap-2 hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10 transition-all duration-300 group">
            <div class="avatar placeholder">
                <div class="bg-gradient-to-br from-primary via-primary to-secondary text-primary-content rounded-lg w-8 h-8 group-hover:scale-105 transition-transform duration-200 shadow-md">
                    <i data-lucide="activity" class="w-4 h-4 group-hover:animate-pulse"></i>
                </div>
            </div>
            <span class="bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent hidden sm:inline group-hover:from-primary/80 group-hover:to-secondary/80 transition-all duration-200">
                Health Tracker Pro
            </span>
            <span class="text-primary sm:hidden font-extrabold">HTP</span>
        </a>
    </div>
    
    <!-- Navbar Center - Desktop Navigation - Optimiert -->
    <div class="navbar-center hidden lg:flex">
        <ul class="menu menu-horizontal gap-2 bg-base-200/30 rounded-full px-2 py-1">
            <li>
                <a href="#dashboard" class="btn btn-ghost btn-sm gap-2 rounded-full hover:bg-primary hover:text-primary-content hover:shadow-lg hover:scale-105 transition-all duration-200 group" data-nav="dashboard">
                    <i data-lucide="home" class="w-4 h-4 group-hover:scale-110 transition-transform"></i>
                    <span class="font-medium">Dashboard</span>
                    <div class="badge badge-primary badge-xs opacity-75 group-hover:opacity-100"></div>
                </a>
            </li>
            <li>
                <a href="#progress-hub" class="btn btn-ghost btn-sm gap-2 rounded-full hover:bg-success hover:text-success-content hover:shadow-lg hover:scale-105 transition-all duration-200 group" data-nav="progress">
                    <i data-lucide="target" class="w-4 h-4 group-hover:scale-110 transition-transform"></i>
                    <span class="font-medium">Fortschritt</span>
                </a>
            </li>
            <li>
                <a href="#analytics" class="btn btn-ghost btn-sm gap-2 rounded-full hover:bg-info hover:text-info-content hover:shadow-lg hover:scale-105 transition-all duration-200 group" data-nav="analytics">
                    <i data-lucide="bar-chart-3" class="w-4 h-4 group-hover:scale-110 transition-transform"></i>
                    <span class="font-medium">Analytics</span>
                </a>
            </li>
        </ul>
    </div>
    
    <!-- Navbar End - Actions & Status - Optimiert -->
    <div class="navbar-end gap-2">
        <!-- Install Hint wird hier automatisch eingef√ºgt durch pwa.js -->
        
        <!-- Connection Status Badge - Verbessert -->
        <div class="indicator tooltip tooltip-bottom" data-tip="Verbindungsstatus pr√ºfen">
            <span class="indicator-item indicator-top indicator-end badge badge-success badge-xs animate-pulse" id="connection-indicator"></span>
            <button class="badge badge-success gap-2 cursor-pointer hover:badge-success/80 transition-colors duration-200 text-xs font-medium" 
                    id="connection-status"
                    onclick="healthTracker?.checkConnectionStatus?.()">
                <i data-lucide="wifi" class="w-3 h-3"></i>
                <span class="hidden sm:inline">Online</span>
            </button>
        </div>
        
        <!-- Quick Add Button - Neu -->
        <div class="tooltip tooltip-bottom" data-tip="Schnell Daten hinzuf√ºgen">
            <button class="btn btn-primary btn-sm btn-circle hover:btn-primary/80 hover:scale-110 transition-all duration-200 shadow-md" 
                    onclick="healthTracker?.showQuickAddModal?.()">
                <i data-lucide="plus" class="w-4 h-4"></i>
            </button>
        </div>
        
        <!-- Goals Button - Optimiert -->
        <div class="indicator tooltip tooltip-bottom" data-tip="Ziele verwalten">
            <span class="indicator-item indicator-top indicator-end badge badge-secondary badge-xs animate-bounce" id="goals-indicator"></span>
            <button class="btn btn-ghost btn-sm gap-2 hover:btn-secondary hover:text-secondary-content transition-all duration-200 tooltip tooltip-bottom"
                    data-tip="Ziele verwalten"
                    onclick="document.getElementById('goals-modal').showModal()">
                <i data-lucide="target" class="w-4 h-4 group-hover:scale-110 transition-transform"></i>
                <span class="hidden xl:inline font-medium">Ziele</span>
            </button>
        </div>
        
        <!-- Action Menu Dropdown - Erweitert -->
        <div class="dropdown dropdown-end">
            <div tabindex="0" role="button" class="btn btn-ghost btn-circle btn-sm hover:bg-accent/10 hover:text-accent hover:scale-105 transition-all duration-200 group" aria-label="Mehr Optionen">
                <i data-lucide="more-vertical" class="w-4 h-4 group-hover:rotate-90 transition-transform duration-300"></i>
            </div>
            <ul tabindex="0" class="dropdown-content menu bg-base-100/95 backdrop-blur-md rounded-box z-[100] w-64 p-3 shadow-2xl border border-base-300/30 animate-in fade-in slide-in-from-top-2 duration-200">
                <li class="menu-title mb-2">
                    <span class="text-base-content/70 font-semibold flex items-center gap-2">
                        <i data-lucide="zap" class="w-4 h-4"></i>
                        Schnellaktionen
                    </span>
                </li>
                
                <!-- Theme Toggle - Verbessert -->
                <li>
                    <button class="gap-3 py-3 rounded-lg hover:bg-info/10 hover:text-info transition-all duration-200 group" 
                            onclick="healthTracker?.showThemeSelector?.()">
                        <i data-lucide="palette" class="w-4 h-4 group-hover:scale-110 transition-transform"></i>
                        <span class="font-medium">Design √§ndern</span>
                        <div class="badge badge-info badge-outline badge-xs ml-auto">Themes</div>
                    </button>
                </li>
                
                <!-- Export/Import -->
                <li>
                    <button class="gap-3 py-3 rounded-lg hover:bg-warning/10 hover:text-warning transition-all duration-200 group" 
                            onclick="healthTracker?.showImportExport?.()">
                        <i data-lucide="download" class="w-4 h-4 group-hover:scale-110 transition-transform"></i>
                        <span class="font-medium">Export/Import</span>
                    </button>
                </li>
                
                <div class="divider my-2 opacity-50"></div>
                
                <!-- Settings -->
                <li>
                    <button class="gap-3 py-3 rounded-lg hover:bg-base-200 transition-all duration-200 group" 
                            onclick="healthTracker?.showSettings?.()">
                        <i data-lucide="settings" class="w-4 h-4 text-base-content/70 group-hover:rotate-90 group-hover:text-base-content transition-all duration-300"></i>
                        <span class="font-medium">Einstellungen</span>
                    </button>
                </li>
                
                <!-- Help -->
                <li>
                    <button class="gap-3 py-3 rounded-lg hover:bg-base-200 transition-all duration-200 group" 
                            onclick="healthTracker?.showHelp?.()">
                        <i data-lucide="help-circle" class="w-4 h-4 text-base-content/70 group-hover:scale-110 group-hover:text-base-content transition-all duration-200"></i>
                        <span class="font-medium">Hilfe & Support</span>
                    </button>
                </li>
                
                <!-- About -->
                <li>
                    <button class="gap-3 py-3 rounded-lg hover:bg-base-200 transition-all duration-200 group" 
                            onclick="healthTracker?.showAbout?.()">
                        <i data-lucide="info" class="w-4 h-4 text-base-content/70 group-hover:scale-110 group-hover:text-base-content transition-all duration-200"></i>
                        <span class="font-medium">√úber die App</span>
                    </button>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Enhanced Mobile Bottom Navigation mit Smart Features -->
<div id="mobile-bottom-nav" class="btm-nav lg:hidden z-40 border-t border-base-300/50 bg-base-100/95 backdrop-blur-md shadow-lg transition-transform duration-300">
    <!-- Dashboard/Home -->
    <button class="nav-item group relative overflow-hidden" data-nav="dashboard" onclick="healthTracker?.navigateTo?.('dashboard')">
        <div class="nav-icon-wrapper relative">
            <i data-lucide="home" class="w-5 h-5 transition-all duration-200 group-active:scale-110"></i>
            <div class="nav-indicator absolute -top-1 -right-1 w-2 h-2 bg-primary rounded-full opacity-0 scale-0 transition-all duration-200"></div>
        </div>
        <span class="btm-nav-label text-xs font-medium">Home</span>
        <div class="nav-ripple absolute inset-0 bg-primary/10 rounded-lg scale-0 transition-transform duration-300"></div>
    </button>

    <!-- Progress Hub -->
    <button class="nav-item group relative overflow-hidden" data-nav="progress" onclick="healthTracker?.navigateTo?.('progress-hub')">
        <div class="nav-icon-wrapper relative">
            <i data-lucide="target" class="w-5 h-5 transition-all duration-200 group-active:scale-110"></i>
            <div class="nav-progress-ring absolute inset-0 w-8 h-8 -translate-x-1.5 -translate-y-1.5">
                <svg class="w-8 h-8 -rotate-90 opacity-0 transition-opacity duration-200" viewBox="0 0 32 32">
                    <circle cx="16" cy="16" r="14" stroke="currentColor" stroke-width="2" fill="none" 
                            class="text-primary/30" stroke-dasharray="87.96" stroke-dashoffset="87.96"/>
                    <circle cx="16" cy="16" r="14" stroke="currentColor" stroke-width="2" fill="none" 
                            class="text-primary" stroke-dasharray="87.96" stroke-dashoffset="66" 
                            style="transition: stroke-dashoffset 0.5s ease"/>
                </svg>
            </div>
        </div>
        <span class="btm-nav-label text-xs font-medium">Fortschritt</span>
        <div class="nav-ripple absolute inset-0 bg-success/10 rounded-lg scale-0 transition-transform duration-300"></div>
    </button>

    <!-- Quick Add FAB -->
    <button class="nav-item nav-fab group relative overflow-hidden bg-gradient-to-br from-primary to-primary/80 text-primary-content shadow-lg hover:shadow-xl transition-all duration-200 scale-110" 
            data-nav="add" onclick="healthTracker?.showQuickAddModal?.()">
        <div class="nav-icon-wrapper relative">
            <i data-lucide="plus" class="w-6 h-6 transition-all duration-200 group-active:rotate-90"></i>
            <div class="fab-glow absolute inset-0 bg-primary/30 rounded-full scale-150 animate-pulse"></div>
        </div>
        <span class="btm-nav-label text-xs font-semibold">Hinzuf√ºgen</span>
        <div class="nav-ripple absolute inset-0 bg-white/20 rounded-lg scale-0 transition-transform duration-300"></div>
    </button>

    <!-- Analytics -->
    <button class="nav-item group relative overflow-hidden" data-nav="analytics" onclick="healthTracker?.navigateTo?.('analytics')">
        <div class="nav-icon-wrapper relative">
            <i data-lucide="bar-chart-3" class="w-5 h-5 transition-all duration-200 group-active:scale-110"></i>
            <div class="nav-stats-dots absolute -top-1 -right-1 flex gap-0.5">
                <div class="w-1 h-1 bg-info rounded-full animate-pulse"></div>
                <div class="w-1 h-1 bg-info rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                <div class="w-1 h-1 bg-info rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
            </div>
        </div>
        <span class="btm-nav-label text-xs font-medium">Analytics</span>
        <div class="nav-ripple absolute inset-0 bg-info/10 rounded-lg scale-0 transition-transform duration-300"></div>
    </button>

    <!-- Settings/More -->
    <button class="nav-item group relative overflow-hidden" data-nav="more" onclick="healthTracker?.showMobileMoreMenu?.()">
        <div class="nav-icon-wrapper relative">
            <i data-lucide="more-horizontal" class="w-5 h-5 transition-all duration-200 group-active:rotate-90"></i>
            <div class="nav-notification absolute -top-1 -right-1 w-3 h-3 bg-warning text-warning-content rounded-full text-[8px] flex items-center justify-center font-bold opacity-0 scale-0 transition-all duration-200" id="mobile-nav-notification">!</div>
        </div>
        <span class="btm-nav-label text-xs font-medium">Mehr</span>
        <div class="nav-ripple absolute inset-0 bg-base-300/20 rounded-lg scale-0 transition-transform duration-300"></div>
    </button>
</div>

<!-- Mobile Navigation Gestures Overlay (Optional) -->
<div id="nav-gesture-overlay" class="fixed inset-0 pointer-events-none z-30 lg:hidden">
    <div class="swipe-indicator absolute bottom-20 left-1/2 transform -translate-x-1/2 opacity-0 transition-opacity duration-300">
        <div class="bg-base-content/20 text-base-content px-3 py-1 rounded-full text-xs">
            Wische f√ºr Navigation
        </div>
    </div>
</div>

    <!-- Optimierte Hero Section -->
<section class="hero min-h-screen bg-gradient-to-br from-primary/10 via-secondary/5 to-accent/10 relative overflow-hidden">
    <!-- Enhanced Background -->
    <div class="absolute inset-0">
        <!-- Primary Gradient Layer -->
        <div class="absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-secondary/5"></div>
        
        <!-- Subtle Pattern -->
        <div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width="40" height="40" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="%23000000" fill-opacity="0.02"%3E%3Ccircle cx="20" cy="20" r="2"/%3E%3Ccircle cx="10" cy="10" r="1"/%3E%3Ccircle cx="30" cy="30" r="1"/%3E%3C/g%3E%3C/svg%3E')]"></div>
        
        <!-- Floating Elements -->
        <div class="absolute top-20 left-16 w-2 h-2 bg-primary/20 rounded-full animate-pulse"></div>
        <div class="absolute top-32 right-20 w-3 h-3 bg-secondary/20 rounded-full animate-pulse"></div>
        <div class="absolute bottom-40 left-10 w-1.5 h-1.5 bg-accent/20 rounded-full animate-pulse"></div>
        <div class="absolute bottom-20 right-16 w-2.5 h-2.5 bg-info/20 rounded-full animate-pulse"></div>
    </div>
    
    <!-- Glass Overlay -->
    <div class="absolute inset-0 bg-gradient-to-t from-base-100/10 to-transparent backdrop-blur-[0.5px]"></div>
    
    <div class="hero-content text-center relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="w-full">
            <!-- Main Heading -->
            <div class="mb-12">
                <!-- Logo Icon -->
                <div class="flex justify-center mb-8">
                    <div class="relative group cursor-pointer" onclick="healthTracker?.showQuickAddModal?.()">
                        <div class="p-6 bg-gradient-to-br from-primary/10 via-primary/5 to-secondary/10 rounded-3xl backdrop-blur-sm border border-primary/20 shadow-2xl group-hover:shadow-3xl transition-all duration-500 group-hover:scale-105">
                            <i data-lucide="heart-pulse" class="w-20 h-20 text-primary transition-all duration-300 group-hover:scale-110"></i>
                        </div>
                        <!-- Hover Tooltip -->
                        <div class="absolute -bottom-12 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none">
                            <div class="bg-base-content text-base-100 text-xs px-3 py-1 rounded-lg whitespace-nowrap">
                                Schnell-Eingabe √∂ffnen
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Title -->
                <h1 class="text-5xl md:text-7xl font-black mb-6">
                    <span class="block bg-gradient-to-r from-primary via-secondary to-accent bg-clip-text text-transparent leading-tight">
                        Health Tracker
                    </span>
                    <span class="block text-3xl md:text-5xl font-bold text-base-content/80 mt-2">
                        Professional
                    </span>
                </h1>
                
                <!-- Version Badge -->
                <div class="flex justify-center mb-8">
                    <div class="badge badge-primary badge-lg gap-2 px-6 py-3 shadow-lg">
                        <i data-lucide="sparkles" class="w-4 h-4"></i>
                        <span class="font-semibold">PWA v2.1</span>
                        <div class="badge badge-success badge-xs ml-2">Beta</div>
                    </div>
                </div>
                
                <!-- Description -->
                <p class="text-lg md:text-xl text-base-content/80 max-w-3xl mx-auto leading-relaxed mb-8">
                    Die <strong class="text-primary">modernste</strong> Gesundheitsplattform f√ºr 
                    <strong class="text-secondary">professionelles</strong> Wellness-Management mit
                    <strong class="text-accent">KI-gest√ºtzten</strong> Einblicken.
                </p>
                
                <!-- Feature Pills -->
                <div class="flex flex-wrap justify-center gap-3 mb-12">
                    <span class="px-4 py-2 bg-primary/10 text-primary rounded-full text-sm font-medium border border-primary/20">
                        üß† KI-Analytics
                    </span>
                    <span class="px-4 py-2 bg-secondary/10 text-secondary rounded-full text-sm font-medium border border-secondary/20">
                        üì± Offline-First
                    </span>
                    <span class="px-4 py-2 bg-accent/10 text-accent rounded-full text-sm font-medium border border-accent/20">
                        üîí Privacy-First
                    </span>
                    <span class="px-4 py-2 bg-info/10 text-info rounded-full text-sm font-medium border border-info/20">
                        ‚ö° Real-time
                    </span>
                </div>
            </div>

            <!-- Dynamic Stats Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 lg:gap-6 mb-12 max-w-6xl mx-auto">
                <!-- Goals Card -->
                <div class="group cursor-pointer" onclick="document.getElementById('progress-hub')?.scrollIntoView({behavior: 'smooth'})">
                    <div class="stat bg-gradient-to-br from-base-100/90 to-base-100/70 backdrop-blur-sm rounded-2xl border border-base-300/50 shadow-xl hover:shadow-2xl transition-all duration-300 p-4 lg:p-6 group-hover:scale-105 group-hover:border-primary/30">
                        <div class="stat-figure text-primary mb-2">
                            <i data-lucide="target" class="w-8 h-8 lg:w-10 lg:h-10"></i>
                        </div>
                        <div class="stat-title text-xs lg:text-sm">Heutige Ziele</div>
                        <div class="stat-value text-xl lg:text-3xl" id="hero-goals-today">‚Äî</div>
                        <div class="stat-desc text-xs">erreicht</div>
                    </div>
                </div>
                
                <!-- Streak Card -->
                <div class="group cursor-pointer" onclick="healthTracker?.showStreakDetails?.()">
                    <div class="stat bg-gradient-to-br from-base-100/90 to-base-100/70 backdrop-blur-sm rounded-2xl border border-base-300/50 shadow-xl hover:shadow-2xl transition-all duration-300 p-4 lg:p-6 group-hover:scale-105 group-hover:border-secondary/30">
                        <div class="stat-figure text-secondary mb-2">
                            <i data-lucide="calendar-days" class="w-8 h-8 lg:w-10 lg:h-10"></i>
                        </div>
                        <div class="stat-title text-xs lg:text-sm">Aktueller Streak</div>
                        <div class="stat-value text-xl lg:text-3xl" id="hero-current-streak">‚Äî</div>
                        <div class="stat-desc text-xs">Tage in Folge</div>
                    </div>
                </div>
                
                <!-- Improvement Card -->
                <div class="group cursor-pointer" onclick="document.getElementById('analytics')?.scrollIntoView({behavior: 'smooth'})">
                    <div class="stat bg-gradient-to-br from-base-100/90 to-base-100/70 backdrop-blur-sm rounded-2xl border border-base-300/50 shadow-xl hover:shadow-2xl transition-all duration-300 p-4 lg:p-6 group-hover:scale-105 group-hover:border-accent/30">
                        <div class="stat-figure text-accent mb-2">
                            <i data-lucide="trending-up" class="w-8 h-8 lg:w-10 lg:h-10"></i>
                        </div>
                        <div class="stat-title text-xs lg:text-sm">Verbesserung</div>
                        <div class="stat-value text-xl lg:text-3xl" id="hero-improvement">‚Äî</div>
                        <div class="stat-desc text-xs">diese Woche</div>
                    </div>
                </div>
                
                <!-- Total Entries Card -->
                <div class="group cursor-pointer" onclick="healthTracker?.showDataUsage?.()">
                    <div class="stat bg-gradient-to-br from-base-100/90 to-base-100/70 backdrop-blur-sm rounded-2xl border border-base-300/50 shadow-xl hover:shadow-2xl transition-all duration-300 p-4 lg:p-6 group-hover:scale-105 group-hover:border-info/30">
                        <div class="stat-figure text-info mb-2">
                            <i data-lucide="database" class="w-8 h-8 lg:w-10 lg:h-10"></i>
                        </div>
                        <div class="stat-title text-xs lg:text-sm">Gesamt Eintr√§ge</div>
                        <div class="stat-value text-xl lg:text-3xl" id="hero-total-entries">‚Äî</div>
                        <div class="stat-desc text-xs">erfasst</div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-12">
                <!-- Primary CTA -->
                <button class="btn btn-primary btn-lg gap-3 shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-200 px-8 py-4" 
                        onclick="healthTracker?.showQuickAddModal?.()">
                    <i data-lucide="plus-circle" class="w-5 h-5"></i>
                    <span class="text-base font-bold">Daten erfassen</span>
                    <div class="badge badge-success badge-xs">Schnell</div>
                </button>
                
                <!-- Secondary CTA -->
                <button class="btn btn-outline btn-secondary btn-lg gap-3 hover:shadow-2xl transform hover:scale-105 transition-all duration-200 px-6 py-4" 
                        onclick="document.getElementById('progress-hub')?.scrollIntoView({behavior: 'smooth'})">
                    <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
                    <span class="text-base font-semibold">Analytics</span>
                </button>
                
                <!-- More Menu -->
                <div class="dropdown dropdown-hover dropdown-top sm:dropdown-bottom">
                    <div tabindex="0" role="button" class="btn btn-ghost btn-lg gap-2 hover:bg-base-200">
                        <i data-lucide="more-horizontal" class="w-5 h-5"></i>
                        <span class="hidden sm:inline">Mehr</span>
                    </div>
                    
                    <ul tabindex="0" class="dropdown-content z-30 menu p-4 shadow-2xl bg-base-100/95 backdrop-blur-md rounded-2xl w-64 border border-base-300/50">
                        <li class="menu-title mb-2">
                            <span class="text-base-content/70 font-semibold">Schnellzugriff</span>
                        </li>
                        <li><a class="gap-3 py-2 rounded-lg hover:bg-primary/10" onclick="document.getElementById('edit-goals-btn')?.click?.()">
                            <i data-lucide="flag" class="w-4 h-4 text-primary"></i>
                            Ziele anpassen
                        </a></li>
                        <li><a class="gap-3 py-2 rounded-lg hover:bg-secondary/10" onclick="document.getElementById('theme-toggle')?.click?.()">
                            <i data-lucide="palette" class="w-4 h-4 text-secondary"></i>
                            Theme √§ndern
                        </a></li>
                        <li><a class="gap-3 py-2 rounded-lg hover:bg-accent/10" onclick="showInstallPrompt?.()">
                            <i data-lucide="download" class="w-4 h-4 text-accent"></i>
                            App installieren
                        </a></li>
                        
                        <div class="divider my-2"></div>
                        
                        <li class="menu-title">
                            <span class="text-base-content/70 font-semibold">Einstellungen</span>
                        </li>
                        <li><a class="gap-3 py-2 rounded-lg hover:bg-info/10" onclick="healthTracker?.showImportExport?.()">
                            <i data-lucide="download-cloud" class="w-4 h-4 text-info"></i>
                            Import/Export
                        </a></li>
                        <li><a class="gap-3 py-2 rounded-lg hover:bg-warning/10" onclick="healthTracker?.showDataPrivacy?.()">
                            <i data-lucide="shield-check" class="w-4 h-4 text-warning"></i>
                            Datenschutz
                        </a></li>
                        <li><a class="gap-3 py-2 rounded-lg hover:bg-success/10" onclick="healthTracker?.showAbout?.()">
                            <i data-lucide="info" class="w-4 h-4 text-success"></i>
                            √úber die App
                        </a></li>
                        <li><a class="gap-3 py-2 rounded-lg hover:bg-error/10" onclick="healthTracker?.showHelp?.()">
                            <i data-lucide="help-circle" class="w-4 h-4 text-error"></i>
                            Hilfe
                        </a></li>
                        <li><a class="gap-3 py-2 rounded-lg hover:bg-primary/10" onclick="healthTracker?.showSettings?.()">
                            <i data-lucide="settings" class="w-4 h-4 text-primary"></i>
                            Einstellungen
                        </a></li>
                    </ul>
                </div>
            </div>

            <!-- Feature Highlights -->
            <div class="grid md:grid-cols-3 gap-6 lg:gap-8 max-w-5xl mx-auto">
                <!-- Offline Feature -->
                <div class="group cursor-pointer" onclick="healthTracker?.showDataPrivacy?.()">
                    <div class="card bg-gradient-to-br from-base-100/80 to-base-100/60 backdrop-blur-md border border-base-300/50 shadow-xl hover:shadow-2xl transition-all duration-500 group-hover:scale-105 group-hover:border-primary/30">
                        <div class="card-body items-center text-center p-6 lg:p-8 space-y-4">
                            <div class="w-16 h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-primary/10 to-primary/5 rounded-2xl flex items-center justify-center group-hover:from-primary/20 group-hover:to-primary/10 transition-all duration-300">
                                <i data-lucide="wifi-off" class="w-8 h-8 lg:w-10 lg:h-10 text-primary group-hover:scale-110 transition-transform"></i>
                            </div>
                            <div class="space-y-2">
                                <h3 class="card-title text-lg lg:text-xl font-bold">Offline-First</h3>
                                <p class="text-sm lg:text-base text-base-content/70 leading-relaxed">
                                    Vollst√§ndige Funktionalit√§t ohne Internet. Automatische Sync bei Verbindung.
                                </p>
                            </div>
                            <div class="badge badge-primary badge-sm opacity-75 group-hover:opacity-100">
                                Verf√ºgbar
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- AI Feature -->
                <div class="group cursor-pointer" onclick="document.getElementById('analytics')?.scrollIntoView({behavior: 'smooth'})">
                    <div class="card bg-gradient-to-br from-base-100/80 to-base-100/60 backdrop-blur-md border border-base-300/50 shadow-xl hover:shadow-2xl transition-all duration-500 group-hover:scale-105 group-hover:border-secondary/30">
                        <div class="card-body items-center text-center p-6 lg:p-8 space-y-4">
                            <div class="w-16 h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-secondary/10 to-secondary/5 rounded-2xl flex items-center justify-center group-hover:from-secondary/20 group-hover:to-secondary/10 transition-all duration-300">
                                <i data-lucide="brain" class="w-8 h-8 lg:w-10 lg:h-10 text-secondary group-hover:scale-110 transition-transform"></i>
                            </div>
                            <div class="space-y-2">
                                <h3 class="card-title text-lg lg:text-xl font-bold">KI-Analytics</h3>
                                <p class="text-sm lg:text-base text-base-content/70 leading-relaxed">
                                    Intelligente Muster-Erkennung und personalisierte Empfehlungen.
                                </p>
                            </div>
                            <div class="badge badge-secondary badge-sm opacity-75 group-hover:opacity-100">
                                Beta
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Privacy Feature -->
                <div class="group cursor-pointer" onclick="healthTracker?.showDataPrivacy?.()">
                    <div class="card bg-gradient-to-br from-base-100/80 to-base-100/60 backdrop-blur-md border border-base-300/50 shadow-xl hover:shadow-2xl transition-all duration-500 group-hover:scale-105 group-hover:border-accent/30">
                        <div class="card-body items-center text-center p-6 lg:p-8 space-y-4">
                            <div class="w-16 h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-accent/10 to-accent/5 rounded-2xl flex items-center justify-center group-hover:from-accent/20 group-hover:to-accent/10 transition-all duration-300">
                                <i data-lucide="shield-check" class="w-8 h-8 lg:w-10 lg:h-10 text-accent group-hover:scale-110 transition-transform"></i>
                            </div>
                            <div class="space-y-2">
                                <h3 class="card-title text-lg lg:text-xl font-bold">Privacy-First</h3>
                                <p class="text-sm lg:text-base text-base-content/70 leading-relaxed">
                                    Deine Gesundheitsdaten bleiben ausschlie√ülich auf deinem Ger√§t.
                                </p>
                            </div>
                            <div class="badge badge-accent badge-sm opacity-75 group-hover:opacity-100">
                                GDPR
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Scroll Indicator -->
        <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 flex flex-col items-center space-y-2 cursor-pointer group" 
             onclick="document.getElementById('dashboard')?.scrollIntoView({behavior: 'smooth'})">
            <div class="text-xs font-medium text-base-content/60 group-hover:text-base-content/80 transition-colors">
                Entdecke mehr
            </div>
            <div class="animate-bounce">
                <i data-lucide="chevron-down" class="w-5 h-5 text-base-content/40 group-hover:text-base-content/60"></i>
            </div>
        </div>
    </div>
</section>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 max-w-7xl space-y-8">

        <!-- Progress Hub -->
<section id="progress-hub" class="card bg-base-100 shadow-xl border border-base-300">
    <div class="card-body">
        <div class="flex justify-between items-center mb-6">
            <div class="flex items-center gap-3">
                <div class="avatar placeholder">
                    <div class="bg-primary text-primary-content rounded-full w-10 h-10">
                        <i data-lucide="target" class="w-5 h-5"></i>
                    </div>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-base-content">Fortschrittshub</h2>
                    <p class="text-base-content/70">Verfolge deine Ziele und Erfolge</p>
                </div>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tabs tabs-boxed mb-6">
            <button id="tab-today" class="tab tab-active">Heute</button>
            <button id="tab-week" class="tab">Woche</button>
            <li id="tab-goals" class="tab tab-bordered">Ziele</li>
            <li id="tab-achievements" class="tab tab-bordered">Erfolge</li>
        </div>

        <!-- Content Container -->
        <div id="progress-content" class="min-h-[400px]">
            <!-- Die ProgressHub Klasse f√ºllt diesen Container automatisch -->
            <div class="text-center py-12">
                <div class="text-4xl mb-4">üìä</div>
                <p class="text-base-content/70">Progress Hub wird geladen...</p>
            </div>
        </div>
    </div>
</section>

        <!-- Enhanced Analytics Section -->
<section id="analytics" class="card bg-gradient-to-br from-base-100 via-base-50 to-base-100 shadow-2xl border border-base-300/50 backdrop-blur-sm">
    <div class="card-body p-8">
        <!-- Enhanced Header Section -->
        <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-4">
            <div class="flex items-center gap-4">
                <div class="avatar placeholder">
                    <div class="bg-gradient-to-br from-primary via-secondary to-accent text-primary-content rounded-xl w-12 h-12 shadow-lg">
                        <i data-lucide="bar-chart-3" class="w-6 h-6"></i>
                    </div>
                </div>
                <div>
                    <h2 class="text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                        Analytics Dashboard
                    </h2>
                    <p class="text-base-content/70 text-lg">Entdecke Muster in deinen Gesundheitsdaten</p>
                    <div class="flex items-center gap-2 mt-2">
                        <div class="badge badge-primary badge-sm gap-1">
                            <i data-lucide="trending-up" class="w-3 h-3"></i>
                            Live-Analyse
                        </div>
                        <div class="badge badge-success badge-sm gap-1">
                            <i data-lucide="brain" class="w-3 h-3"></i>
                            KI-Insights
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Period Filter -->
            <div class="flex flex-col lg:flex-row gap-3">
                <div class="flex gap-1 bg-base-200/50 rounded-lg p-1 backdrop-blur-sm">
                    <button class="btn btn-sm btn-primary shadow-md" data-period="7">
                        <i data-lucide="calendar" class="w-4 h-4"></i>
                        7 Tage
                    </button>
                    <button class="btn btn-sm btn-ghost hover:btn-primary transition-all duration-200" data-period="30">
                        30 Tage
                    </button>
                    <button class="btn btn-sm btn-ghost hover:btn-primary transition-all duration-200" data-period="90">
                        90 Tage
                    </button>
                </div>

                <!-- Export & Refresh Actions -->
                <div class="flex gap-2">
                    <button class="btn btn-sm btn-outline btn-accent gap-2 hover:shadow-lg transition-all duration-200">
                        <i data-lucide="download" class="w-4 h-4"></i>
                        <span class="hidden sm:inline">Export</span>
                    </button>
                    <button class="btn btn-sm btn-ghost btn-circle hover:btn-secondary transition-all duration-200" 
                            onclick="healthTracker.analyticsEngine?.updateAllAnalytics()">
                        <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Quick Stats Overview -->
        <div class="stats stats-vertical lg:stats-horizontal shadow-lg bg-gradient-to-r from-base-100 to-base-200 mb-8 w-full">
            <div class="stat place-items-center">
                <div class="stat-figure text-primary">
                    <i data-lucide="activity" class="w-8 h-8"></i>
                </div>
                <div class="stat-title">Gesamt-Eintr√§ge</div>
                <div class="stat-value text-primary" id="analytics-total-entries">0</div>
                <div class="stat-desc">Alle Daten</div>
            </div>
            <div class="stat place-items-center">
                <div class="stat-figure text-success">
                    <i data-lucide="trending-up" class="w-8 h-8"></i>
                </div>
                <div class="stat-title">Verbesserung</div>
                <div class="stat-value text-success" id="analytics-improvement">+12%</div>
                <div class="stat-desc">Diese Woche</div>
            </div>
            <div class="stat place-items-center">
                <div class="stat-figure text-warning">
                    <i data-lucide="target" class="w-8 h-8"></i>
                </div>
                <div class="stat-title">Zielrate</div>
                <div class="stat-value text-warning" id="analytics-goal-rate">78%</div>
                <div class="stat-desc">Durchschnitt</div>
            </div>
            <div class="stat place-items-center">
                <div class="stat-figure text-info">
                    <i data-lucide="flame" class="w-8 h-8"></i>
                </div>
                <div class="stat-title">Streak</div>
                <div class="stat-value text-info" id="analytics-streak">5</div>
                <div class="stat-desc">Tage aktiv</div>
            </div>
        </div>

        <!-- Enhanced Charts Grid -->
        <div class="grid grid-cols-1 xl:grid-cols-2 gap-6 mb-8">
            <!-- Enhanced Trend Chart -->
            <div class="card bg-gradient-to-br from-base-100 to-base-200/50 border border-base-300/50 shadow-xl hover:shadow-2xl transition-all duration-300 group">
                <div class="card-body p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="card-title text-xl flex items-center gap-2">
                            <i data-lucide="trending-up" class="w-5 h-5 text-primary"></i>
                            Trends & Entwicklung
                        </h3>
                        <div class="indicator">
                            <span class="indicator-item indicator-top indicator-end badge badge-primary badge-xs">Live</span>
                            <div class="dropdown dropdown-end">
                                <div tabindex="0" role="button" class="btn btn-ghost btn-sm btn-circle">
                                    <i data-lucide="more-horizontal" class="w-4 h-4"></i>
                                </div>
                                <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow-lg border border-base-300/50">
                                    <li><button class="gap-2" data-metric="steps">
                                        <i data-lucide="footprints" class="w-4 h-4 text-success"></i>
                                        Schritte
                                    </button></li>
                                    <li><button class="gap-2" data-metric="water">
                                        <i data-lucide="droplets" class="w-4 h-4 text-info"></i>
                                        Wasser
                                    </button></li>
                                    <li><button class="gap-2" data-metric="sleep">
                                        <i data-lucide="moon" class="w-4 h-4 text-warning"></i>
                                        Schlaf
                                    </button></li>
                                    <li><button class="gap-2" data-metric="weight">
                                        <i data-lucide="scale" class="w-4 h-4 text-secondary"></i>
                                        Gewicht
                                    </button></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Metric Selection Tabs -->
                    <div class="tabs tabs-boxed mb-4">
                        <button class="tab tab-active" data-metric="steps">
                            <i data-lucide="footprints" class="w-4 h-4 mr-1"></i>
                            Schritte
                        </button>
                        <button class="tab" data-metric="water">
                            <i data-lucide="droplets" class="w-4 h-4 mr-1"></i>
                            Wasser
                        </button>
                        <button class="tab" data-metric="sleep">
                            <i data-lucide="moon" class="w-4 h-4 mr-1"></i>
                            Schlaf
                        </button>
                        <button class="tab" data-metric="weight">
                            <i data-lucide="scale" class="w-4 h-4 mr-1"></i>
                            Gewicht
                        </button>
                    </div>

                    <div class="h-64 relative">
                        <canvas id="trends-chart" class="rounded-lg"></canvas>
                        <div class="absolute inset-0 flex items-center justify-center hidden" id="trends-loading">
                            <span class="loading loading-spinner loading-lg text-primary"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Activity Heatmap -->
            <div class="card bg-gradient-to-br from-base-100 to-base-200/50 border border-base-300/50 shadow-xl hover:shadow-2xl transition-all duration-300">
                <div class="card-body p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="card-title text-xl flex items-center gap-2">
                            <i data-lucide="flame" class="w-5 h-5 text-warning"></i>
                            Aktivit√§ts-Heatmap
                        </h3>
                        <div class="tooltip tooltip-left" data-tip="Zeigt deine Aktivit√§tsmuster √ºber Zeit">
                            <div class="badge badge-info gap-1">
                                <i data-lucide="info" class="w-3 h-3"></i>
                                Pattern
                            </div>
                        </div>
                    </div>

                    <div id="heatmap-chart" class="h-64 relative">
                        <!-- Enhanced Heatmap wird hier generiert -->
                        <div class="absolute inset-0 flex items-center justify-center" id="heatmap-placeholder">
                            <div class="text-center">
                                <i data-lucide="calendar" class="w-12 h-12 text-base-content/30 mx-auto mb-2"></i>
                                <p class="text-base-content/60 text-sm">Heatmap wird geladen...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Insights Section -->
        <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
            <!-- AI-Powered Insights -->
            <div class="card bg-gradient-to-br from-primary/5 to-secondary/5 border border-primary/20 shadow-xl">
                <div class="card-body p-6">
                    <h3 class="card-title text-xl mb-6 flex items-center gap-3">
                        <i data-lucide="brain" class="w-6 h-6 text-primary"></i>
                        KI-Datenerkenntnisse
                        <div class="badge badge-primary badge-sm">Neu</div>
                    </h3>

                    <div id="analytics-insights" class="space-y-4">
                        <!-- Enhanced Insights werden hier eingef√ºgt -->
                        <div class="alert alert-info shadow-sm">
                            <i data-lucide="trending-up" class="w-5 h-5"></i>
                            <div>
                                <h4 class="font-semibold">Positive Entwicklung</h4>
                                <p class="text-sm opacity-80">Deine Schrittanzahl ist in den letzten 7 Tagen um 15% gestiegen!</p>
                            </div>
                        </div>

                        <div class="alert alert-warning shadow-sm">
                            <i data-lucide="moon" class="w-5 h-5"></i>
                            <div>
                                <h4 class="font-semibold">Schlafoptimierung</h4>
                                <p class="text-sm opacity-80">An Tagen mit mehr Wasserzufuhr schl√§fst du durchschnittlich 30 Min. besser.</p>
                            </div>
                        </div>

                        <div class="alert alert-success shadow-sm">
                            <i data-lucide="trophy" class="w-5 h-5"></i>
                            <div>
                                <h4 class="font-semibold">Zielerreichung</h4>
                                <p class="text-sm opacity-80">Du erreichst deine Wasserziele zu 85% - gro√üartig!</p>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex gap-2 mt-6">
                        <button class="btn btn-primary btn-sm gap-2">
                            <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                            Aktualisieren
                        </button>
                        <button class="btn btn-outline btn-sm gap-2">
                            <i data-lucide="share-2" class="w-4 h-4"></i>
                            Teilen
                        </button>
                    </div>
                </div>
            </div>

            <!-- Enhanced Correlations -->
            <div class="card bg-gradient-to-br from-secondary/5 to-accent/5 border border-secondary/20 shadow-xl">
                <div class="card-body p-6">
                    <h3 class="card-title text-xl mb-6 flex items-center gap-3">
                        <i data-lucide="git-branch" class="w-6 h-6 text-secondary"></i>
                        Datenkorrelationen
                        <div class="badge badge-secondary badge-sm">Analyse</div>
                    </h3>

                    <div id="correlation-insights" class="space-y-4">
                        <!-- Enhanced Correlation insights werden hier eingef√ºgt -->
                        <div class="bg-base-100 rounded-lg p-4 shadow-sm border border-base-300/50">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium flex items-center gap-2">
                                    <i data-lucide="footprints" class="w-4 h-4 text-success"></i>
                                    Schritte ‚Üî Schlaf
                                </span>
                                <div class="badge badge-success">Stark positiv</div>
                            </div>
                            <div class="w-full bg-base-300 rounded-full h-2">
                                <div class="bg-success h-2 rounded-full" style="width: 75%"></div>
                            </div>
                            <p class="text-xs text-base-content/70 mt-1">Mehr Schritte = besserer Schlaf</p>
                        </div>

                        <div class="bg-base-100 rounded-lg p-4 shadow-sm border border-base-300/50">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium flex items-center gap-2">
                                    <i data-lucide="droplets" class="w-4 h-4 text-info"></i>
                                    Wasser ‚Üî Energie
                                </span>
                                <div class="badge badge-info">Mittel positiv</div>
                            </div>
                            <div class="w-full bg-base-300 rounded-full h-2">
                                <div class="bg-info h-2 rounded-full" style="width: 60%"></div>
                            </div>
                            <p class="text-xs text-base-content/70 mt-1">Ausreichend Trinken steigert das Wohlbefinden</p>
                        </div>

                        <div class="bg-base-100 rounded-lg p-4 shadow-sm border border-base-300/50">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium flex items-center gap-2">
                                    <i data-lucide="moon" class="w-4 h-4 text-warning"></i>
                                    Schlaf ‚Üî Gewicht
                                </span>
                                <div class="badge badge-warning">Schwach negativ</div>
                            </div>
                            <div class="w-full bg-base-300 rounded-full h-2">
                                <div class="bg-warning h-2 rounded-full" style="width: 30%"></div>
                            </div>
                            <p class="text-xs text-base-content/70 mt-1">Zu wenig Schlaf kann Gewichtszunahme f√∂rdern</p>
                        </div>
                    </div>

                    <!-- Export Options -->
                    <div class="flex gap-2 mt-6">
                        <button class="btn btn-secondary btn-sm gap-2">
                            <i data-lucide="download" class="w-4 h-4"></i>
                            Report
                        </button>
                        <button class="btn btn-outline btn-sm gap-2">
                            <i data-lucide="mail" class="w-4 h-4"></i>
                            Senden
                        </button>
                    </div>
                </div>
            </div>
</section>

        <!-- Data Entry & Activity Feed -->
        <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
            <!-- Health Data Form -->
            <div class="xl:col-span-2">
                <div class="card bg-base-100 shadow-xl border border-base-300">
                    <div class="card-body">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="avatar placeholder">
                                <div class="bg-primary text-primary-content rounded-full w-10 h-10">
                                    <i data-lucide="plus-circle" class="w-5 h-5"></i>
                                </div>
                            </div>
                            <div>
                                <h2 class="card-title">Gesundheitsdaten eingeben</h2>
                                <p class="text-base-content/70">Verfolge deine t√§glichen Gesundheitsmetriken</p>
                            </div>
                        </div>
                        
                        <form id="health-form" class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Date Input -->
                                <div class="form-control md:col-span-2">
                                    <label class="label">
                                        <span class="label-text font-medium">Datum</span>
                                    </label>
                                    <input type="date" name="date" 
                                           class="input input-bordered focus:input-primary" 
                                           required>
                                </div>

                                <!-- Weight -->
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text font-medium flex items-center gap-2">
                                            <i data-lucide="scale" class="w-4 h-4 text-secondary"></i>
                                            Gewicht (kg)
                                        </span>
                                    </label>
                                    <input type="number" name="weight" step="0.1" placeholder="75.5" 
                                           class="input input-bordered focus:input-secondary" 
                                           min="20" max="500">
                                </div>
                                
                                <!-- Steps -->
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text font-medium flex items-center gap-2">
                                            <i data-lucide="footprints" class="w-4 h-4 text-success"></i>
                                            Schritte
                                        </span>
                                    </label>
                                    <input type="number" name="steps" placeholder="8500" 
                                           class="input input-bordered focus:input-success" 
                                           min="0" max="100000">
                                </div>
                                
                                <!-- Water -->
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text font-medium flex items-center gap-2">
                                            <i data-lucide="droplets" class="w-4 h-4 text-info"></i>
                                            Wasser (Liter)
                                        </span>
                                    </label>
                                    <input type="number" name="waterIntake" step="0.1" placeholder="2.1" 
                                           class="input input-bordered focus:input-info" 
                                           min="0" max="10">
                                </div>
                                
                                <!-- Sleep -->
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text font-medium flex items-center gap-2">
                                            <i data-lucide="moon" class="w-4 h-4 text-warning"></i>
                                            Schlaf (Stunden)
                                        </span>
                                    </label>
                                    <input type="number" name="sleepHours" step="0.1" placeholder="7.5" 
                                           class="input input-bordered focus:input-warning" 
                                           min="0" max="24">
                                </div>
                            </div>
                            
                            <!-- Mood -->
                            <div class="form-control">
                                <label class="label">
                                    <span class="label-text font-medium flex items-center gap-2">
                                        <i data-lucide="smile" class="w-4 h-4 text-accent"></i>
                                        Stimmung
                                    </span>
                                </label>
                                <select name="mood" class="select select-bordered focus:select-accent">
                                    <option value="">Stimmung w√§hlen</option>
                                    <option value="excellent">üòä Ausgezeichnet</option>
                                    <option value="good">üôÇ Gut</option>
                                    <option value="neutral">üòê Neutral</option>
                                    <option value="bad">üòû Schlecht</option>
                                    <option value="terrible">üò¢ Furchtbar</option>
                                </select>
                            </div>
                            
                            <!-- Notes -->
                            <div class="form-control">
                                <label class="label">
                                    <span class="label-text font-medium flex items-center gap-2">
                                        <i data-lucide="file-text" class="w-4 h-4 text-primary"></i>
                                        Notizen
                                    </span>
                                </label>
                                <textarea name="notes" placeholder="Wie war dein Tag?" 
                                          class="textarea textarea-bordered focus:textarea-primary h-20"></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-block gap-2">
                                <i data-lucide="save" class="w-4 h-4"></i>
                                Daten speichern
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Recent Activities -->
            <div class="card bg-base-100 shadow-xl border border-base-300">
                <div class="card-body">
                    <div class="flex justify-between items-center mb-4">
                        <div class="flex items-center gap-2">
                            <i data-lucide="clock" class="w-5 h-5 text-primary"></i>
                            <h2 class="card-title">Letzte Aktivit√§ten</h2>
                        </div>
                        <button id="refresh-activities-btn" 
                                class="btn btn-ghost btn-circle btn-sm tooltip" 
                                data-tip="Aktualisieren">
                            <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
                        </button>
                    </div>

                    <!-- Activities Timeline -->
                    <div id="recent-activities" class="space-y-4 max-h-96 overflow-y-auto">
                        <!-- Activities werden hier eingef√ºgt -->
                    </div>

                    <!-- Empty State -->
                    <div id="activities-empty" class="text-center py-8">
                        <i data-lucide="inbox" class="w-12 h-12 mx-auto mb-3 opacity-50"></i>
                        <p class="font-medium text-base-content/70">Noch keine Aktivit√§ten</p>
                        <p class="text-sm text-base-content/60">F√ºge deine ersten Gesundheitsdaten hinzu!</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Goals Modal -->
    <dialog id="goals-modal" class="modal">
        <div class="modal-box max-w-4xl">
            <div class="flex justify-between items-center mb-6 pb-4 border-b border-base-300">
                <div class="flex items-center gap-3">
                    <div class="avatar placeholder">
                        <div class="bg-primary text-primary-content rounded-full w-12 h-12">
                            <i data-lucide="target" class="w-6 h-6"></i>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-base-content">Ziele anpassen</h3>
                        <p class="text-sm text-base-content/70">Setze deine pers√∂nlichen Gesundheitsziele</p>
                    </div>
                </div>
                <form method="dialog">
                    <button class="btn btn-ghost btn-sm btn-circle">
                        <i data-lucide="x" class="w-5 h-5"></i>
                    </button>
                </form>
            </div>

            <form id="goals-form" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Weight Goal -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-semibold flex items-center gap-2">
                                <i data-lucide="scale" class="w-4 h-4 text-secondary"></i>
                                Gewichtsziel
                            </span>
                            <span class="label-text-alt text-base-content/60">Optional</span>
                        </label>
                        <div class="join">
                            <input type="number" name="weightGoal" 
                                   class="input input-bordered join-item flex-1 focus:input-secondary" 
                                   placeholder="70" min="30" max="300" step="0.1">
                            <span class="join-item bg-base-200 px-4 flex items-center text-base-content/80 font-medium">kg</span>
                        </div>
                        <label class="label">
                            <span class="label-text-alt text-base-content/60">Dein Zielgewicht (leer lassen falls kein Ziel)</span>
                        </label>
                    </div>

                    <!-- Steps Goal -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-semibold flex items-center gap-2">
                                <i data-lucide="footprints" class="w-4 h-4 text-success"></i>
                                Schrittziel
                            </span>
                        </label>
                        <div class="join">
                            <input type="number" name="stepsGoal" 
                                   class="input input-bordered join-item flex-1 focus:input-success" 
                                   placeholder="10000" min="1000" max="50000" required>
                            <span class="join-item bg-base-200 px-4 flex items-center text-base-content/80 font-medium">Schritte</span>
                        </div>
                        <label class="label">
                            <span class="label-text-alt text-base-content/60">T√§gliche Schritte (empfohlen: 10.000)</span>
                        </label>
                    </div>

                    <!-- Water Goal -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-semibold flex items-center gap-2">
                                <i data-lucide="droplets" class="w-4 h-4 text-info"></i>
                                Wasserziel
                            </span>
                        </label>
                        <div class="join">
                            <input type="number" name="waterGoal" 
                                   class="input input-bordered join-item flex-1 focus:input-info" 
                                   placeholder="2.0" min="0.5" max="10" step="0.1" required>
                            <span class="join-item bg-base-200 px-4 flex items-center text-base-content/80 font-medium">Liter</span>
                        </div>
                        <label class="label">
                            <span class="label-text-alt text-base-content/60">T√§gliche Wassermenge (empfohlen: 2-3L)</span>
                        </label>
                    </div>

                    <!-- Sleep Goal -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-semibold flex items-center gap-2">
                                <i data-lucide="moon" class="w-4 h-4 text-warning"></i>
                                Schlafziel
                            </span>
                        </label>
                        <div class="join">
                            <input type="number" name="sleepGoal" 
                                   class="input input-bordered join-item flex-1 focus:input-warning" 
                                   placeholder="8" min="4" max="12" step="0.5" required>
                            <span class="join-item bg-base-200 px-4 flex items-center text-base-content/80 font-medium">Stunden</span>
                        </div>
                        <label class="label">
                            <span class="label-text-alt text-base-content/60">Nachtschlaf-Dauer (empfohlen: 7-9h)</span>
                        </label>
                    </div>
                </div>

                <div class="alert alert-info">
                    <i data-lucide="lightbulb" class="w-5 h-5"></i>
                    <div>
                        <h4 class="font-bold">Tipp f√ºr realistische Ziele:</h4>
                        <div class="text-sm mt-1">
                            Setze dir erreichbare Ziele, die du schrittweise steigern kannst. 
                            Kleine, konstante Fortschritte sind besser als unrealistische Ziele.
                        </div>
                    </div>
                </div>

                <div class="modal-action pt-6 border-t border-base-300">
                    <form method="dialog">
                        <button type="button" class="btn btn-ghost">Abbrechen</button>
                    </form>
                    <button type="submit" class="btn btn-primary gap-2">
                        <i data-lucide="save" class="w-4 h-4"></i>
                        Ziele speichern
                    </button>
                </div>
            </form>
        </div>
        <form method="dialog" class="modal-backdrop">
            <button>close</button>
        </form>
    </dialog>

    <!-- Data Retention Modal -->
<dialog id="data-retention-modal" class="modal">
    <div class="modal-box">
        <h3 class="font-bold text-lg mb-4">
            <i data-lucide="clock" class="w-6 h-6 inline mr-2"></i>
            Automatische Datenbereinigung
        </h3>
        
        <div class="alert alert-info mb-4">
            <i data-lucide="info" class="w-5 h-5"></i>
            <div>
                <strong>Datenbereinigung wurde ausgef√ºhrt</strong>
                <p class="text-sm mt-1" id="retention-details">Alte Eintr√§ge wurden automatisch entfernt</p>
            </div>
        </div>

        <div class="stats stats-vertical w-full mb-4">
            <div class="stat">
                <div class="stat-title">Entfernte Eintr√§ge</div>
                <div class="stat-value text-sm" id="removed-entries">0</div>
            </div>
            <div class="stat">
                <div class="stat-title">Cutoff-Datum</div>
                <div class="stat-value text-sm" id="cutoff-date">-</div>
            </div>
        </div>

        <div class="modal-action">
            <button class="btn btn-primary" onclick="this.closest('.modal').close()">Verstanden</button>
        </div>
    </div>
</dialog>

<!-- Biometric Setup Modal -->
<dialog id="biometric-setup-modal" class="modal">
    <div class="modal-box">
        <h3 class="font-bold text-lg mb-4">
            <i data-lucide="fingerprint" class="w-6 h-6 inline mr-2"></i>
            Biometrische Entsperrung einrichten
        </h3>
        
        <div class="space-y-4">
            <div class="alert alert-warning">
                <i data-lucide="shield-alert" class="w-5 h-5"></i>
                <div>
                    <strong>Sicherheitshinweis</strong>
                    <p class="text-sm mt-1">Dein Ger√§t muss biometrische Authentifizierung unterst√ºtzen (Fingerabdruck, Face ID, etc.)</p>
                </div>
            </div>

            <div class="steps steps-vertical lg:steps-horizontal w-full">
                <div class="step step-primary" id="step-1">Berechtigung</div>
                <div class="step" id="step-2">Registrierung</div>
                <div class="step" id="step-3">Aktivierung</div>
            </div>

            <div id="biometric-status" class="text-center py-4">
                <div class="loading loading-spinner loading-md text-primary"></div>
                <p class="mt-2 text-sm text-base-content/70">Biometrische F√§higkeiten werden gepr√ºft...</p>
            </div>
        </div>

        <div class="modal-action">
            <button class="btn" onclick="this.closest('.modal').close()">Abbrechen</button>
            <button class="btn btn-primary" id="setup-biometric-btn" onclick="healthTracker.setupBiometric()" disabled>
                <i data-lucide="fingerprint" class="w-4 h-4 mr-2"></i>
                Einrichten
            </button>
        </div>
    </div>
</dialog>

<!-- Enhanced Toast/Notification Container - Unten rechts -->
<div id="toast-container" class="toast toast-end toast-bottom z-50 space-y-2">
    <!-- Toasts werden hier dynamisch eingef√ºgt -->
</div>

<!-- Settings Validation Toast Container -->
<div id="settings-toast-container" class="toast toast-end toast-bottom z-50">
    <!-- Settings-spezifische Toasts -->
</div>

    <!-- Notification Permission Modal -->
    <dialog id="notification-permission-modal" class="modal">
        <div class="modal-box">
            <div class="flex items-center gap-4 mb-4">
                <div class="avatar placeholder">
                    <div class="bg-primary text-primary-content rounded-full w-12 h-12">
                        <i data-lucide="bell" class="w-6 h-6"></i>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-bold">Bleib am Ball!</h3>
                    <p class="text-sm text-base-content/70">Erhalte hilfreiche Erinnerungen</p>
                </div>
            </div>
            
            <div class="mb-6">
                <p class="mb-4">Health Tracker Pro kann dich an wichtige Gewohnheiten erinnern:</p>
                <ul class="list-disc list-inside space-y-1 text-sm text-base-content/80">
                    <li>Wassererinnerungen alle 2 Stunden</li>
                    <li>Schritt-Motivation am Nachmittag</li>
                    <li>Schlafzeit-Erinnerung am Abend</li>
                    <li>T√§gliche Tracking-Erinnerung</li>
                </ul>
            </div>
            
            <div class="modal-action">
                <form method="dialog">
                    <button class="btn btn-ghost">Sp√§ter</button>
                </form>
                <button id="enable-notifications-btn" class="btn btn-primary">
                    <i data-lucide="bell" class="w-4 h-4"></i>
                    Benachrichtigungen aktivieren
                </button>
            </div>
        </div>
    </dialog>

    <!-- Enhanced Footer -->
<footer class="bg-gradient-to-br from-base-200 via-base-300 to-base-200 border-t border-base-300/50">
    <div class="container mx-auto px-4">
        <!-- Main Footer Content -->
        <div class="footer p-10 text-base-content">
            <!-- Brand & Description -->
            <aside class="flex flex-col items-start">
                <div class="flex items-center gap-3 mb-4">
                    <div class="avatar placeholder">
                        <div class="bg-gradient-to-br from-primary to-secondary text-primary-content rounded-xl w-12 h-12">
                            <i data-lucide="activity" class="w-6 h-6"></i>
                        </div>
                    </div>
                    <div>
                        <div class="text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                            Health Tracker Pro
                        </div>
                        <div class="text-sm text-base-content/70">Deine Gesundheit im Fokus</div>
                    </div>
                </div>
                <p class="text-base-content/80 max-w-sm leading-relaxed">
                    Offline-f√§hige Progressive Web App f√ºr umfassendes Gesundheits-Tracking mit 
                    <span class="font-semibold text-primary">100% Datenschutz</span>.
                </p>
                
                <!-- Feature Badges -->
                <div class="flex flex-wrap gap-2 mt-4">
                    <div class="badge badge-primary gap-1">
                        <i data-lucide="wifi-off" class="w-3 h-3"></i>
                        Offline-f√§hig
                    </div>
                    <div class="badge badge-success gap-1">
                        <i data-lucide="shield-check" class="w-3 h-3"></i>
                        Sicher
                    </div>
                    <div class="badge badge-secondary gap-1">
                        <i data-lucide="smartphone" class="w-3 h-3"></i>
                        PWA
                    </div>
                </div>
            </aside>

            <!-- Navigation Links -->
            <nav class="flex flex-col">
                <h6 class="footer-title text-primary">Navigation</h6>
                <a href="#dashboard" class="link link-hover flex items-center gap-2 py-1 hover:text-primary transition-colors">
                    <i data-lucide="home" class="w-4 h-4 text-primary/60"></i>
                    Dashboard
                </a>
                <a href="#progress-hub" class="link link-hover flex items-center gap-2 py-1 hover:text-success transition-colors">
                    <i data-lucide="target" class="w-4 h-4 text-success/60"></i>
                    Fortschritt
                </a>
                <a href="#analytics" class="link link-hover flex items-center gap-2 py-1 hover:text-info transition-colors">
                    <i data-lucide="bar-chart-3" class="w-4 h-4 text-info/60"></i>
                    Analytics
                </a>
                <a href="#health-form" class="link link-hover flex items-center gap-2 py-1 hover:text-accent transition-colors">
                    <i data-lucide="plus-circle" class="w-4 h-4 text-accent/60"></i>
                    Daten eingeben
                </a>
            </nav>

            <!-- Quick Actions -->
            <nav class="flex flex-col">
                <h6 class="footer-title text-secondary">Aktionen</h6>
                <button onclick="document.getElementById('goals-modal').showModal()" 
                        class="link link-hover flex items-center gap-2 py-1 hover:text-secondary transition-colors text-left">
                    <i data-lucide="target" class="w-4 h-4 text-secondary/60"></i>
                    Ziele verwalten
                </button>
                <button id="footer-theme-toggle" class="link link-hover flex items-center gap-2 py-1 hover:text-accent transition-colors text-left">
                    <i data-lucide="palette" class="w-4 h-4 text-accent/60"></i>
                    Design √§ndern
                </button>
                <button onclick="window.print()" class="link link-hover flex items-center gap-2 py-1 hover:text-info transition-colors text-left">
                    <i data-lucide="printer" class="w-4 h-4 text-info/60"></i>
                    Daten drucken
                </button>
                <button onclick="healthTracker.debugProgressHub?.()" class="link link-hover flex items-center gap-2 py-1 hover:text-warning transition-colors text-left">
                    <i data-lucide="bug" class="w-4 h-4 text-warning/60"></i>
                    Debug-Info
                </button>
            </nav>

            <!-- Health Categories -->
            <nav class="flex flex-col">
                <h6 class="footer-title text-accent">Tracking</h6>
                <div class="space-y-2">
                    <div class="flex items-center gap-2 text-sm text-base-content/70">
                        <i data-lucide="footprints" class="w-4 h-4 text-success"></i>
                        <span>Schritte & Aktivit√§t</span>
                    </div>
                    <div class="flex items-center gap-2 text-sm text-base-content/70">
                        <i data-lucide="droplets" class="w-4 h-4 text-info"></i>
                        <span>Wasser & Hydration</span>
                    </div>
                    <div class="flex items-center gap-2 text-sm text-base-content/70">
                        <i data-lucide="moon" class="w-4 h-4 text-warning"></i>
                        <span>Schlaf & Erholung</span>
                    </div>
                    <div class="flex items-center gap-2 text-sm text-base-content/70">
                        <i data-lucide="scale" class="w-4 h-4 text-secondary"></i>
                        <span>Gewicht & K√∂rperdaten</span>
                    </div>
                </div>
            </nav>
        </div>

        <!-- Stats Section -->
        <div class="py-6 border-t border-base-300/50">
            <div class="stats stats-vertical lg:stats-horizontal shadow-sm bg-base-100/50 w-full">
                <div class="stat place-items-center">
                    <div class="stat-title">Eintr√§ge heute</div>
                    <div class="stat-value text-2xl text-primary" id="footer-today-entries">0</div>
                    <div class="stat-desc">Tracking-Sessions</div>
                </div>
                <div class="stat place-items-center">
                    <div class="stat-title">Diese Woche</div>
                    <div class="stat-value text-2xl text-success" id="footer-week-entries">0</div>
                    <div class="stat-desc">Gesamt-Eintr√§ge</div>
                </div>
                <div class="stat place-items-center">
                    <div class="stat-title">Ziele erreicht</div>
                    <div class="stat-value text-2xl text-accent" id="footer-goals-achieved">0</div>
                    <div class="stat-desc">Heute</div>
                </div>
                <div class="stat place-items-center">
                    <div class="stat-title">Streak</div>
                    <div class="stat-value text-2xl text-warning" id="footer-current-streak">0</div>
                    <div class="stat-desc">Tage am St√ºck</div>
                </div>
            </div>
        </div>

        <!-- Bottom Bar -->
        <div class="footer footer-center p-4 border-t border-base-300/50 text-base-content/70">
            <aside class="flex flex-col lg:flex-row items-center justify-between w-full max-w-6xl">
                <!-- Copyright -->
                <div class="flex flex-col lg:flex-row items-center gap-2">
                    <p class="font-medium">
                        &copy; 2025 <span class="text-primary font-bold">Health Tracker Pro</span>
                    </p>
                    <div class="divider divider-horizontal hidden lg:block"></div>
                    <div class="flex items-center gap-1">
                        <span class="text-sm">Made with</span>
                        <i data-lucide="heart" class="w-4 h-4 text-error"></i>
                    </div>
                </div>

                <!-- Tech Stack & Status -->
                <div class="flex flex-col lg:flex-row items-center gap-4 mt-2 lg:mt-0">
                    <!-- Connection Status -->
                    <div class="flex items-center gap-2">
                        <div class="indicator">
                            <span class="indicator-item indicator-top indicator-end badge badge-success badge-xs animate-pulse"></span>
                            <div class="badge badge-ghost gap-1" id="footer-connection-status">
                                <span class="text-xs">Online</span>
                            </div>
                        </div>
                    </div>

                    <!-- Version Info -->
        <div class="text-center pt-4 border-t border-base-300">
          <p class="text-xs text-base-content opacity-60">
            Health Tracker Pro v2.1.0 | 
            <span id="footer-build-date">Build: 08.08.2025</span> | 
            <span id="footer-cache-status">Cache: Aktiv</span>
          </p>
        </div>

                    <!-- Social Actions -->
                    <div class="flex gap-2">
                        <div class="tooltip tooltip-top" data-tip="Teile die App">
                            <button onclick="navigator.share?.({title: 'Health Tracker Pro', url: window.location.href})" 
                                    class="btn btn-ghost btn-xs btn-circle hover:btn-primary">
                                <i data-lucide="share-2" class="w-3 h-3"></i>
                            </button>
                        </div>
                        <div class="tooltip tooltip-top" data-tip="Feedback senden">
                            <button onclick="window.open('mailto:feedback@healthtracker.com?subject=Health Tracker Pro Feedback')"
                                    class="btn btn-ghost btn-xs btn-circle hover:btn-secondary">
                                <i data-lucide="mail" class="w-3 h-3"></i>
                            </button>
                        </div>
                        <div class="tooltip tooltip-top" data-tip="GitHub Repository">
                            <a href="#" target="_blank" class="btn btn-ghost btn-xs btn-circle hover:btn-accent">
                                <i data-lucide="github" class="w-3 h-3"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </div>
</footer>

<!-- Startup Loading Indicator -->
<div id="startup-loader" class="fixed inset-0 bg-base-100 z-50 flex items-center justify-center">
    <div class="text-center">
        <div class="loading loading-spinner loading-lg text-primary mb-4"></div>
        <p class="text-base-content/70">App wird geladen...</p>
    </div>
</div>

<!-- Hidden Settings Initialization Tracker -->
<div id="settings-init-status" class="hidden" 
     data-theme-loaded="false" 
     data-retention-checked="false" 
     data-permissions-checked="false">
</div>

    <!-- JavaScript -->
    <!-- ===================================== -->
<!-- OPTIMIERTE SCRIPT-REIHENFOLGE        -->
<!-- ===================================== -->

<!-- 1. KRITISCHER INLINE CODE - Sofort ausgef√ºhrt -->
<script>
// === CRITICAL PATH INIT (vor allem anderen) ===
const appStartTime = performance.now();

// Theme sofort setzen (verhindert FOUC - Flash of Unstyled Content)
(function() {
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    
    // Theme icon vorbereiten
    const themeIcon = document.querySelector('#theme-toggle i');
    if (themeIcon) {
        themeIcon.setAttribute('data-lucide', savedTheme === 'light' ? 'moon' : 'sun');
    }
    
    console.log('üé® Theme geladen in', Math.round(performance.now() - appStartTime), 'ms');
})();

// Startup Status-Tracking
const initStatus = document.getElementById('settings-init-status');
if (initStatus) {
    initStatus.setAttribute('data-theme-loaded', 'true');
    
    // Retention Check Status
    const lastCheck = localStorage.getItem('lastRetentionCheck');
    const today = new Date().toDateString();
    initStatus.setAttribute('data-retention-checked', lastCheck === today);
    
    // Permission Status
    if ('Notification' in window) {
        initStatus.setAttribute('data-permissions-checked', Notification.permission !== 'default');
    }
}

// Error Boundary f√ºr Settings (fr√ºh definieren)
window.addEventListener('error', function(e) {
    if (e.error && e.error.message.includes('settings')) {
        console.error('‚ö†Ô∏è Settings Error:', e.error);
        if (typeof healthTracker !== 'undefined' && healthTracker.applyFallbackSettings) {
            healthTracker.applyFallbackSettings();
        }
    }
});
</script>

<!-- 2. EXTERNE DEPENDENCIES - Async laden -->
<script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.js" 
        async 
        onload="window.lucideLoaded = true; console.log('üì¶ Lucide Icons geladen');">
</script>

<!-- 3. HAUPTAPPLIKATION - Defer f√ºr optimale Performance -->
<script src="/js/app.js" defer></script>

<!-- 4. DOM-READY OPTIMIZED - L√§uft nach DOM + Scripts -->
<script defer>
document.addEventListener('DOMContentLoaded', function() {
    const domReadyTime = performance.now();
    console.log('üöÄ DOM Ready nach', Math.round(domReadyTime - appStartTime), 'ms');
    
    // === STARTUP LOADER MANAGEMENT ===
    const loader = document.getElementById('startup-loader');
    if (loader) {
        // Loader sofort ausblenden wenn alles geladen
        const hideLoader = () => {
            loader.style.opacity = '0';
            loader.style.transition = 'opacity 0.3s ease';
            setTimeout(() => loader.remove(), 300);
        };
        
        // Loader nach max. 1s ausblenden, auch wenn noch nicht alles geladen
        setTimeout(hideLoader, 1000);
    }
    
    // === FORM INITIALIZATION ===
    const dateInput = document.querySelector('input[name="date"]');
    if (dateInput && !dateInput.value) {
        dateInput.value = new Date().toISOString().split('T')[0];
    }
    
    // === ICONS INITIALIZATION (nur wenn Lucide verf√ºgbar) ===
    const initializeIcons = () => {
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
            console.log('‚ú® Icons initialisiert');
        } else if (window.lucideLoaded === undefined) {
            // Retry nach 100ms wenn Lucide noch l√§dt
            setTimeout(initializeIcons, 100);
        }
    };
    
    initializeIcons();
    
    // === THEME TOGGLE SETUP ===
    const themeToggle = document.getElementById('theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', function(e) {
            e.preventDefault();
            
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            // Theme sofort anwenden
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Icon update
            const icon = this.querySelector('i');
            if (icon) {
                icon.setAttribute('data-lucide', newTheme === 'light' ? 'moon' : 'sun');
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }
            
            // Haptic Feedback
            if (navigator.vibrate && localStorage.getItem('hapticFeedback') === 'true') {
                navigator.vibrate(10);
            }
            
            console.log('üé® Theme gewechselt zu:', newTheme);
        });
    }
    
    console.log('‚ö° Theme Toggle initialisiert nach', Math.round(performance.now() - domReadyTime), 'ms');
});
</script>

<!-- 5. HEALTH TRACKER INITIALIZATION - Nach DOM und App.js -->
<script defer>
window.addEventListener('load', function() {
    const loadTime = performance.now();
    console.log('üéØ Window Load nach', Math.round(loadTime - appStartTime), 'ms');
    
    // Health Tracker erst initialisieren wenn alles bereit ist
    if (typeof HealthTracker !== 'undefined') {
        try {
            window.healthTracker = new HealthTracker();
            console.log('‚úÖ Health Tracker initialisiert nach', Math.round(performance.now() - loadTime), 'ms');
        } catch (error) {
            console.error('‚ùå Health Tracker Init Fehler:', error);
            
            // Fallback: Retry nach kurzer Zeit
            setTimeout(() => {
                try {
                    window.healthTracker = new HealthTracker();
                    console.log('üîÑ Health Tracker Retry erfolgreich');
                } catch (retryError) {
                    console.error('‚ùå Health Tracker Retry fehlgeschlagen:', retryError);
                }
            }, 1000);
        }
    } else {
        console.warn('‚ö†Ô∏è HealthTracker Klasse nicht gefunden - Retry...');
        
        // Retry-Logic f√ºr langsame Verbindungen
        let retryCount = 0;
        const maxRetries = 5;
        
        const retryInit = () => {
            if (typeof HealthTracker !== 'undefined') {
                window.healthTracker = new HealthTracker();
                console.log('üîÑ Health Tracker nach', retryCount, 'Retry(s) initialisiert');
            } else if (retryCount < maxRetries) {
                retryCount++;
                setTimeout(retryInit, 500 * retryCount); // Progressive Delay
            } else {
                console.error('‚ùå Health Tracker konnte nicht geladen werden');
            }
        };
        
        retryInit();
    }
});
</script>

<!-- 6. PERFORMANCE-OPTIMIZED SCROLL & INTERACTION HANDLERS -->
<script defer>
// === OPTIMIZED SCROLL BEHAVIOR ===
let ticking = false;
let lastScrollY = 0;

function updateNavbarOnScroll() {
    const navbar = document.querySelector('.navbar');
    const currentScrollY = window.scrollY;
    
    if (navbar) {
        // Scrolled state
        navbar.classList.toggle('scrolled', currentScrollY > 50);
        
        // Mobile auto-hide
        if (window.innerWidth <= 768) {
            const shouldHide = currentScrollY > lastScrollY && currentScrollY > 200;
            navbar.style.transform = shouldHide ? 'translateY(-100%)' : 'translateY(0)';
        }
    }
    
    lastScrollY = currentScrollY;
    ticking = false;
}

// Throttled scroll listener f√ºr bessere Performance
window.addEventListener('scroll', () => {
    if (!ticking) {
        requestAnimationFrame(updateNavbarOnScroll);
        ticking = true;
    }
}, { passive: true });

// === OPTIMIZED CLICK HANDLERS ===
// Event Delegation f√ºr bessere Performance
document.addEventListener('click', function(e) {
    // Haptic feedback f√ºr Buttons
    if (e.target.closest('.btn')) {
        if (navigator.vibrate && localStorage.getItem('hapticFeedback') === 'true') {
            navigator.vibrate(10);
        }
    }
    
    // Settings Input Validation
    if (e.target.matches('input[data-settings]')) {
        // Debounced validation
        clearTimeout(e.target.validationTimeout);
        e.target.validationTimeout = setTimeout(() => {
            validateSettingsInput(e.target, { test: value => value.length > 0 });
        }, 300);
    }
}, { passive: false });

// === SETTINGS VALIDATION HELPER (globale Funktion) ===
window.validateSettingsInput = function(inputElement, validationRules = {}) {
    const value = inputElement.value;
    const isValid = validationRules.test ? validationRules.test(value) : value.length > 0;
    
    // Optimized class handling
    if (isValid) {
        inputElement.classList.remove('input-error');
        inputElement.classList.add('input-success');
    } else {
        inputElement.classList.remove('input-success');
        inputElement.classList.add('input-error');
    }
    
    return isValid;
};

// Performance-Log
console.log('‚ö° Event Handlers initialisiert nach', Math.round(performance.now() - appStartTime), 'ms');
</script>

<!-- 7. PROGRESSIVE ENHANCEMENT - Optional Features -->
<script defer>
// Nur laden wenn erweiterte Features aktiviert sind
document.addEventListener('DOMContentLoaded', () => {
    // Chart.js nur bei Analytics-Nutzung
    if (localStorage.getItem('advancedAnalytics') === 'true') {
        const chartScript = document.createElement('script');
        chartScript.src = 'https://cdn.jsdelivr.net/npm/chart.js';
        chartScript.defer = true;
        chartScript.onload = () => console.log('üìä Chart.js lazy loaded');
        document.head.appendChild(chartScript);
    }
    
    // Service Worker Registration (non-blocking)
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js')
            .then(registration => {
                console.log('üîß Service Worker registriert:', registration.scope);
            })
            .catch(error => {
                console.log('Service Worker Registration fehlgeschlagen:', error);
            });
    }
});
</script>

<!-- 8. ENHANCED DEVELOPMENT HELPERS -->
<script defer>
if (window.location.hostname === 'localhost' || window.location.search.includes('debug=true')) {
    // Performance Monitoring
    window.addEventListener('load', () => {
        setTimeout(() => {
            const totalTime = Math.round(performance.now() - appStartTime);
            
            // Console Log (wie bisher)
            console.log(`
üöÄ PERFORMANCE SUMMARY:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚è±Ô∏è  Total Load Time: ${totalTime}ms
üéØ  Target: <2000ms
üìä  Status: ${totalTime < 2000 ? '‚úÖ GOOD' : '‚ö†Ô∏è NEEDS OPTIMIZATION'}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            `);
            
            // ZUS√ÑTZLICH: Performance Panel auf der Seite
            showPerformancePanel(totalTime);
        }, 100);
    });
}

// Performance Panel auf der Webseite anzeigen
function showPerformancePanel(loadTime) {
    // Performance Panel erstellen
    const panel = document.createElement('div');
    panel.id = 'performance-panel';
    panel.className = 'fixed bottom-4 right-4 z-50 bg-base-300/95 backdrop-blur-sm rounded-lg shadow-lg p-4 max-w-xs text-xs border border-primary/20';
    
    const status = loadTime < 2000 ? 'GOOD' : 'NEEDS OPTIMIZATION';
    const statusColor = loadTime < 2000 ? 'text-success' : 'text-warning';
    const statusIcon = loadTime < 2000 ? '‚úÖ' : '‚ö†Ô∏è';
    
    panel.innerHTML = `
        <div class="flex items-center justify-between mb-2">
            <h4 class="font-bold text-primary">üöÄ Performance</h4>
            <button onclick="this.parentElement.parentElement.remove()" class="btn btn-ghost btn-xs">√ó</button>
        </div>
        <div class="space-y-1">
            <div class="flex justify-between">
                <span>Load Time:</span>
                <span class="font-bold">${loadTime}ms</span>
            </div>
            <div class="flex justify-between">
                <span>Target:</span>
                <span>&lt;2000ms</span>
            </div>
            <div class="flex justify-between">
                <span>Status:</span>
                <span class="${statusColor} font-bold">${statusIcon} ${status}</span>
            </div>
            <div class="divider my-2"></div>
            <div class="flex justify-between">
                <span>Memory:</span>
                <span>${navigator.deviceMemory || 'N/A'}GB</span>
            </div>
            <div class="flex justify-between">
                <span>Connection:</span>
                <span>${navigator.connection?.effectiveType || 'Unknown'}</span>
            </div>
        </div>
        
        <!-- Progress Bar -->
        <div class="mt-3">
            <div class="flex justify-between text-[10px] mb-1">
                <span>Performance Score</span>
                <span>${Math.max(0, 100 - Math.floor(loadTime/20))}%</span>
            </div>
            <div class="w-full bg-base-100 rounded-full h-2">
                <div class="bg-primary h-2 rounded-full transition-all duration-1000" 
                     style="width: ${Math.max(0, 100 - Math.floor(loadTime/20))}%"></div>
            </div>
        </div>
        
        <!-- Quick Actions -->
        <div class="mt-3 flex gap-1">
            <button onclick="location.reload()" class="btn btn-xs btn-primary">Refresh</button>
            <button onclick="localStorage.clear(); location.reload()" class="btn btn-xs btn-outline">Clear Cache</button>
        </div>
    `;
    
    document.body.appendChild(panel);
    
    // Auto-hide nach 10 Sekunden
    setTimeout(() => {
        if (panel.parentNode) {
            panel.style.opacity = '0';
            panel.style.transform = 'translateY(20px)';
            setTimeout(() => panel.remove(), 300);
        }
    }, 10000);
}
</script>
<!-- Debug Panel Toggle Button (nur in Dev-Mode) -->
<script defer>
if (window.location.hostname === 'localhost' || window.location.search.includes('debug=true')) {
    document.addEventListener('DOMContentLoaded', () => {
        // Debug Toggle Button erstellen
        const debugBtn = document.createElement('button');
        debugBtn.innerHTML = 'üîß Debug';
        debugBtn.className = 'btn btn-xs btn-ghost fixed top-4 left-4 z-50 opacity-50 hover:opacity-100';
        debugBtn.onclick = () => showDebugConsole();
        document.body.appendChild(debugBtn);
    });
}

function showDebugConsole() {
    const existingConsole = document.getElementById('debug-console');
    if (existingConsole) {
        existingConsole.remove();
        return;
    }
    
    const currentTime = performance.now();
    const totalTime = Math.round(currentTime - (window.appStartTime || 0));
    
    const debugConsole = document.createElement('div');
    debugConsole.id = 'debug-console';
    debugConsole.className = 'fixed inset-4 z-[60] bg-base-300/95 backdrop-blur-md rounded-lg shadow-2xl border border-primary/30 overflow-hidden';
    
    debugConsole.innerHTML = `
        <div class="bg-primary text-primary-content p-3 flex items-center justify-between">
            <h3 class="font-bold">üîß Debug Console</h3>
            <button onclick="this.closest('#debug-console').remove()" class="btn btn-ghost btn-sm text-primary-content">√ó</button>
        </div>
        
        <div class="p-4 max-h-96 overflow-y-auto">
            <div class="grid gap-4">
                <!-- Performance Metrics -->
                <div class="card bg-base-200">
                    <div class="card-body p-3">
                        <h4 class="font-bold text-primary mb-2">‚ö° Performance</h4>
                        <div class="grid grid-cols-2 gap-2 text-sm">
                            <div>Load Time: <strong>${totalTime}ms</strong></div>
                            <div>Target: <strong>&lt;2000ms</strong></div>
                            <div>Status: <strong class="${totalTime < 2000 ? 'text-success' : 'text-warning'}">${totalTime < 2000 ? '‚úÖ GOOD' : '‚ö†Ô∏è SLOW'}</strong></div>
                            <div>Memory: <strong>${navigator.deviceMemory || 'N/A'}GB</strong></div>
                        </div>
                    </div>
                </div>
                
                <!-- Storage Info -->
                <div class="card bg-base-200">
                    <div class="card-body p-3">
                        <h4 class="font-bold text-secondary mb-2">üíæ Storage</h4>
                        <div class="text-sm">
                            <div>Health Data: <strong>${Object.keys(JSON.parse(localStorage.getItem('healthData') || '{}')).length}</strong> entries</div>
                            <div>Goals: <strong>${Object.keys(JSON.parse(localStorage.getItem('userGoals') || '{}')).length}</strong> active</div>
                            <div>Theme: <strong>${localStorage.getItem('theme') || 'light'}</strong></div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="card bg-base-200">
                    <div class="card-body p-3">
                        <h4 class="font-bold text-accent mb-2">üöÄ Actions</h4>
                        <div class="flex gap-2 flex-wrap">
                            <button onclick="location.reload()" class="btn btn-xs btn-primary">Reload</button>
                            <button onclick="localStorage.clear(); location.reload()" class="btn btn-xs btn-warning">Clear All</button>
                            <button onclick="console.clear()" class="btn btn-xs btn-ghost">Clear Console</button>
                            <button onclick="window.healthTracker?.showDataUsage?.()" class="btn btn-xs btn-info">Storage Info</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(debugConsole);
}
</script>
</body>
</html>
