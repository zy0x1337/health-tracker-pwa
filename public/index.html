<!DOCTYPE html>
<html lang="de" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Tracker Pro - Deine Gesundheit im Blick</title>
    <meta name="description" content="Verfolge deine Gesundheitsziele und bleibe motiviert mit deinem pers√∂nlichen Health Tracker.">
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Health Tracker Pro">
    
    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-16x16.png">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    
    <!-- Styles -->
    <link href="/dist/output.css" rel="stylesheet">
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body class="bg-base-100 text-base-content min-h-screen">
    <!-- Header -->
    <header class="bg-base-200 border-b border-base-300">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center">
                        <i data-lucide="heart-pulse" class="w-6 h-6 text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                            Health Tracker Pro
                        </h1>
                        <p class="text-sm text-base-content/70">Deine Gesundheit im Blick</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-3">
                    <div id="connection-status" class="text-xs text-green-600">üåê Online</div>
                    <button id="theme-toggle" class="btn btn-ghost btn-circle" title="Theme wechseln">
                        <i data-lucide="moon" class="w-5 h-5"></i>
                    </button>
                    <button id="install-btn" class="btn btn-primary btn-sm hidden" title="App installieren">
                        <i data-lucide="download" class="w-4 h-4"></i>
                        Installieren
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 space-y-8">
        <!-- Today's Stats -->
        <section class="bg-base-200 rounded-2xl p-6">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold">Heutige Werte</h2>
                <button id="edit-goals-btn" class="btn btn-outline btn-sm">
                    <i data-lucide="target" class="w-4 h-4"></i>
                    Ziele bearbeiten
                </button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
                <!-- Gewicht -->
                <div class="stat-card bg-base-100 rounded-xl p-4">
                    <div class="flex items-center justify-between mb-3">
                        <div class="w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center">
                            <i data-lucide="scale" class="w-5 h-5 text-purple-600"></i>
                        </div>
                        <span class="text-xs text-base-content/60">Gewicht</span>
                    </div>
                    <div class="space-y-2">
                        <div class="text-2xl font-bold" id="today-weight">-- kg</div>
                        <div class="text-xs text-base-content/70">
                            Ziel: <span id="weight-goal-display">--</span>
                        </div>
                        <progress id="weight-progress" class="progress progress-purple w-full" value="0" max="100"></progress>
                        <div class="text-xs text-base-content/60" id="weight-progress-text">Fortschritt wird berechnet...</div>
                    </div>
                </div>

                <!-- Schritte -->
                <div class="stat-card bg-base-100 rounded-xl p-4">
                    <div class="flex items-center justify-between mb-3">
                        <div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center">
                            <i data-lucide="footprints" class="w-5 h-5 text-green-600"></i>
                        </div>
                        <span class="text-xs text-base-content/60">Schritte</span>
                    </div>
                    <div class="space-y-2">
                        <div class="text-2xl font-bold" id="today-steps">0</div>
                        <div class="text-xs text-base-content/70">
                            Ziel: <span id="steps-goal-display">10.000</span>
                        </div>
                        <div class="radial-progress text-success" style="--value:0" id="steps-progress-circle">
                            <span class="text-xs" id="steps-percentage">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Wasser -->
                <div class="stat-card bg-base-100 rounded-xl p-4">
                    <div class="flex items-center justify-between mb-3">
                        <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center">
                            <i data-lucide="droplets" class="w-5 h-5 text-blue-600"></i>
                        </div>
                        <span class="text-xs text-base-content/60">Wasser</span>
                    </div>
                    <div class="space-y-2">
                        <div class="text-2xl font-bold" id="today-water">0 L</div>
                        <div class="text-xs text-base-content/70">
                            Ziel: <span id="water-goal-display">2,0 L</span>
                        </div>
                        <div class="flex space-x-1" id="water-glasses">
                            <!-- Dynamisch generierte Gl√§ser -->
                        </div>
                        <progress id="water-progress" class="progress progress-info w-full" value="0" max="100"></progress>
                        <div class="text-xs text-base-content/60" id="water-progress-text">0% des Tagesziels</div>
                    </div>
                </div>

                <!-- Schlaf -->
                <div class="stat-card bg-base-100 rounded-xl p-4">
                    <div class="flex items-center justify-between mb-3">
                        <div class="w-10 h-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg flex items-center justify-center">
                            <i data-lucide="moon" class="w-5 h-5 text-indigo-600"></i>
                        </div>
                        <span class="text-xs text-base-content/60">Schlaf</span>
                    </div>
                    <div class="space-y-2">
                        <div class="text-2xl font-bold" id="today-sleep">0 h</div>
                        <div class="text-xs text-base-content/70">
                            Ziel: <span id="sleep-goal-display">8 h</span>
                        </div>
                        <div class="flex space-x-1" id="sleep-quality">
                            <!-- Dynamisch generierte Sterne -->
                        </div>
                        <progress id="sleep-progress" class="progress progress-warning w-full" value="0" max="100"></progress>
                        <div class="text-xs text-base-content/60" id="sleep-progress-text">0% des Tagesziels</div>
                    </div>
                </div>

                <!-- NEU: Blutdruck -->
                <div class="stat-card bg-base-100 rounded-xl p-4">
                    <div class="flex items-center justify-between mb-3">
                        <div class="w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center">
                            <i data-lucide="heart" class="w-5 h-5 text-red-600"></i>
                        </div>
                        <span class="text-xs text-base-content/60">Blutdruck</span>
                    </div>
                    <div class="space-y-2">
                        <div class="text-lg font-bold" id="today-bp">--/-- mmHg</div>
                        <div class="text-sm font-semibold" id="today-pulse">-- bpm</div>
                        <div class="badge badge-sm" id="bp-status">Keine Daten</div>
                        <div class="text-xs text-base-content/60" id="bp-category">Kategorie: --</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Data Input Form -->
        <section class="bg-base-200 rounded-2xl p-6">
            <h2 class="text-2xl font-bold mb-6">Daten eingeben</h2>
            
            <form id="health-form" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Gewicht -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-medium">
                                <i data-lucide="scale" class="w-4 h-4 inline mr-2"></i>
                                Gewicht (kg)
                            </span>
                        </label>
                        <input type="number" id="weight" step="0.1" min="0" max="300" 
                               class="input input-bordered" placeholder="z.B. 70.5">
                    </div>

                    <!-- Schritte -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-medium">
                                <i data-lucide="footprints" class="w-4 h-4 inline mr-2"></i>
                                Schritte
                            </span>
                        </label>
                        <input type="number" id="steps" min="0" max="100000" 
                               class="input input-bordered" placeholder="z.B. 8500">
                    </div>

                    <!-- Wasser -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-medium">
                                <i data-lucide="droplets" class="w-4 h-4 inline mr-2"></i>
                                Wasseraufnahme (L)
                            </span>
                        </label>
                        <input type="number" id="water" step="0.1" min="0" max="10" 
                               class="input input-bordered" placeholder="z.B. 2.5">
                    </div>

                    <!-- Schlaf -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-medium">
                                <i data-lucide="moon" class="w-4 h-4 inline mr-2"></i>
                                Schlafstunden
                            </span>
                        </label>
                        <input type="number" id="sleep" step="0.5" min="0" max="24" 
                               class="input input-bordered" placeholder="z.B. 7.5">
                    </div>

                    <!-- NEU: Blutdruck Systolisch -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-medium">
                                <i data-lucide="trending-up" class="w-4 h-4 inline mr-2"></i>
                                Systolisch (mmHg)
                            </span>
                        </label>
                        <input type="number" id="systolic" min="60" max="250" 
                               class="input input-bordered" placeholder="z.B. 120">
                    </div>

                    <!-- NEU: Blutdruck Diastolisch -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-medium">
                                <i data-lucide="trending-down" class="w-4 h-4 inline mr-2"></i>
                                Diastolisch (mmHg)
                            </span>
                        </label>
                        <input type="number" id="diastolic" min="40" max="150" 
                               class="input input-bordered" placeholder="z.B. 80">
                    </div>

                    <!-- NEU: Puls -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-medium">
                                <i data-lucide="heart-pulse" class="w-4 h-4 inline mr-2"></i>
                                Puls (bpm)
                            </span>
                        </label>
                        <input type="number" id="pulse" min="30" max="200" 
                               class="input input-bordered" placeholder="z.B. 72">
                    </div>

                    <!-- Stimmung -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-medium">
                                <i data-lucide="smile" class="w-4 h-4 inline mr-2"></i>
                                Stimmung
                            </span>
                        </label>
                        <select id="mood" class="select select-bordered">
                            <option value="">W√§hle deine Stimmung</option>
                            <option value="excellent">üòÑ Ausgezeichnet</option>
                            <option value="good">üòä Gut</option>
                            <option value="neutral">üòê Neutral</option>
                            <option value="bad">üòî Schlecht</option>
                            <option value="terrible">üòû Furchtbar</option>
                        </select>
                    </div>

                    <!-- Notizen -->
                    <div class="form-control md:col-span-2">
                        <label class="label">
                            <span class="label-text font-medium">
                                <i data-lucide="file-text" class="w-4 h-4 inline mr-2"></i>
                                Notizen (optional)
                            </span>
                        </label>
                        <textarea id="notes" class="textarea textarea-bordered h-20" 
                                placeholder="Zus√§tzliche Notizen zu deinem heutigen Tag..."></textarea>
                    </div>
                </div>

                <div class="flex justify-end">
                    <button type="submit" class="btn btn-primary">
                        <i data-lucide="save" class="w-4 h-4"></i>
                        Speichern
                    </button>
                </div>
            </form>
        </section>

        <!-- Charts Section -->
        <section class="space-y-6">
            <h2 class="text-2xl font-bold">Visualisierung (Letzte 7 Tage)</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Gewicht Chart -->
                <div class="bg-base-200 rounded-2xl p-6">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i data-lucide="trending-up" class="w-5 h-5 mr-2 text-purple-600"></i>
                        Gewichtsverlauf
                    </h3>
                    <div class="h-64">
                        <canvas id="weightChart"></canvas>
                    </div>
                </div>

                <!-- Activity Chart -->
                <div class="bg-base-200 rounded-2xl p-6">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i data-lucide="activity" class="w-5 h-5 mr-2 text-green-600"></i>
                        Aktivit√§t & Wasser
                    </h3>
                    <div class="h-64">
                        <canvas id="activityChart"></canvas>
                    </div>
                </div>

                <!-- Sleep Chart -->
                <div class="bg-base-200 rounded-2xl p-6">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i data-lucide="moon" class="w-5 h-5 mr-2 text-indigo-600"></i>
                        Schlafqualit√§t
                    </h3>
                    <div class="h-64">
                        <canvas id="sleepChart"></canvas>
                    </div>
                </div>

                <!-- NEU: Blood Pressure & Pulse Chart -->
                <div class="bg-base-200 rounded-2xl p-6">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i data-lucide="heart" class="w-5 h-5 mr-2 text-red-600"></i>
                        Blutdruck & Puls
                    </h3>
                    <div class="h-64">
                        <canvas id="bpChart"></canvas>
                    </div>
                </div>

                <!-- Mood Chart -->
                <div class="bg-base-200 rounded-2xl p-6 lg:col-span-2">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i data-lucide="smile" class="w-5 h-5 mr-2 text-yellow-600"></i>
                        Stimmungsverteilung
                    </h3>
                    <div class="h-64">
                        <canvas id="moodChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Recent Activities -->
        <section class="bg-base-200 rounded-2xl p-6">
            <h2 class="text-2xl font-bold mb-6">Letzte Aktivit√§ten</h2>
            <div id="recent-activities" class="space-y-3">
                <div class="text-center py-8 text-base-content/60">
                    <i data-lucide="clock" class="w-12 h-12 mx-auto mb-4 opacity-50"></i>
                    <p>Keine Aktivit√§ten vorhanden</p>
                    <p class="text-sm">F√ºge deine ersten Gesundheitsdaten hinzu!</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Goals Modal -->
    <div id="goals-modal" class="modal hidden">
        <div class="modal-box">
            <h3 class="font-bold text-lg mb-4">Gesundheitsziele bearbeiten</h3>
            
            <form id="goals-form" class="space-y-4">
                <div class="form-control">
                    <label class="label">
                        <span class="label-text">Gewichtsziel (kg)</span>
                    </label>
                    <input type="number" id="weight-goal-input" step="0.1" min="0" max="300" 
                           class="input input-bordered" placeholder="z.B. 70">
                </div>

                <div class="form-control">
                    <label class="label">
                        <span class="label-text">Schrittziel pro Tag</span>
                    </label>
                    <input type="number" id="steps-goal-input" min="0" max="50000" 
                           class="input input-bordered" value="10000">
                </div>

                <div class="form-control">
                    <label class="label">
                        <span class="label-text">Wasserziel pro Tag (L)</span>
                    </label>
                    <input type="number" id="water-goal-input" step="0.1" min="0" max="10" 
                           class="input input-bordered" value="2.0">
                </div>

                <div class="form-control">
                    <label class="label">
                        <span class="label-text">Schlafziel pro Tag (h)</span>
                    </label>
                    <input type="number" id="sleep-goal-input" step="0.5" min="0" max="24" 
                           class="input input-bordered" value="8">
                </div>

                <div class="modal-action">
                    <button type="button" id="cancel-goals" class="btn btn-ghost">Abbrechen</button>
                    <button type="submit" class="btn btn-primary">Speichern</button>
                </div>
            </form>

            <button id="close-goals-modal" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">‚úï</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/js/app.js"></script>
    <script src="/js/pwa.js"></script>
    <script>
        // Initialize Lucide icons
        lucide.createIcons();
    </script>
</body>
</html>
